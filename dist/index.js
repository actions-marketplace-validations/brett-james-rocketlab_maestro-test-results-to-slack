"use strict";var pr=Object.create;var we=Object.defineProperty;var yr=Object.getOwnPropertyDescriptor;var Er=Object.getOwnPropertyNames;var Tr=Object.getPrototypeOf,_r=Object.prototype.hasOwnProperty;var B=(e,t)=>()=>(e&&(t=e(e=0)),t);var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),vr=(e,t)=>{for(var n in t)we(e,n,{get:t[n],enumerable:!0})},St=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Er(t))!_r.call(e,a)&&a!==n&&we(e,a,{get:()=>t[a],enumerable:!(i=yr(t,a))||i.enumerable});return e};var Z=(e,t,n)=>(n=e!=null?pr(Tr(e)):{},St(t||!e||!e.__esModule?we(n,"default",{value:e,enumerable:!0}):n,e)),br=e=>St(we({},"__esModule",{value:!0}),e);var Ae=S(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.toCommandProperties=ue.toCommandValue=void 0;function wr(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}ue.toCommandValue=wr;function Ar(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}ue.toCommandProperties=Ar});var Dt=S(j=>{"use strict";var Or=j&&j.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Nr=j&&j.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),xr=j&&j.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Or(t,e,n);return Nr(t,e),t};Object.defineProperty(j,"__esModule",{value:!0});j.issue=j.issueCommand=void 0;var Sr=xr(require("os")),Ct=Ae();function It(e,t,n){let i=new Ge(e,t,n);process.stdout.write(i.toString()+Sr.EOL)}j.issueCommand=It;function Fr(e,t=""){It(e,{},t)}j.issue=Fr;var Ft="::",Ge=class{constructor(t,n,i){t||(t="missing.command"),this.command=t,this.properties=n,this.message=i}toString(){let t=Ft+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let n=!0;for(let i in this.properties)if(this.properties.hasOwnProperty(i)){let a=this.properties[i];a&&(n?n=!1:t+=",",t+=`${i}=${Ir(a)}`)}}return t+=`${Ft}${Cr(this.message)}`,t}};function Cr(e){return Ct.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Ir(e){return Ct.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function pe(){return Oe>Ne.length-16&&(Rt.default.randomFillSync(Ne),Oe=0),Ne.slice(Oe,Oe+=16)}var Rt,Ne,Oe,$e=B(()=>{Rt=Z(require("crypto")),Ne=new Uint8Array(256),Oe=Ne.length});var Pt,Ut=B(()=>{Pt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Dr(e){return typeof e=="string"&&Pt.test(e)}var ee,ye=B(()=>{Ut();ee=Dr});function Rr(e,t=0){let n=(R[e[t+0]]+R[e[t+1]]+R[e[t+2]]+R[e[t+3]]+"-"+R[e[t+4]]+R[e[t+5]]+"-"+R[e[t+6]]+R[e[t+7]]+"-"+R[e[t+8]]+R[e[t+9]]+"-"+R[e[t+10]]+R[e[t+11]]+R[e[t+12]]+R[e[t+13]]+R[e[t+14]]+R[e[t+15]]).toLowerCase();if(!ee(n))throw TypeError("Stringified UUID is invalid");return n}var R,te,Ee=B(()=>{ye();R=[];for(let e=0;e<256;++e)R.push((e+256).toString(16).substr(1));te=Rr});function Pr(e,t,n){let i=t&&n||0,a=t||new Array(16);e=e||{};let o=e.node||Mt,c=e.clockseq!==void 0?e.clockseq:Ye;if(o==null||c==null){let _=e.random||(e.rng||pe)();o==null&&(o=Mt=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),c==null&&(c=Ye=(_[6]<<8|_[7])&16383)}let h=e.msecs!==void 0?e.msecs:Date.now(),g=e.nsecs!==void 0?e.nsecs:He+1,m=h-We+(g-He)/1e4;if(m<0&&e.clockseq===void 0&&(c=c+1&16383),(m<0||h>We)&&e.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");We=h,He=g,Ye=c,h+=122192928e5;let p=((h&268435455)*1e4+g)%4294967296;a[i++]=p>>>24&255,a[i++]=p>>>16&255,a[i++]=p>>>8&255,a[i++]=p&255;let E=h/4294967296*1e4&268435455;a[i++]=E>>>8&255,a[i++]=E&255,a[i++]=E>>>24&15|16,a[i++]=E>>>16&255,a[i++]=c>>>8|128,a[i++]=c&255;for(let _=0;_<6;++_)a[i+_]=o[_];return t||te(a)}var Mt,Ye,We,He,Bt,qt=B(()=>{$e();Ee();We=0,He=0;Bt=Pr});function Ur(e){if(!ee(e))throw TypeError("Invalid UUID");let t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var xe,Xe=B(()=>{ye();xe=Ur});function Mr(e){e=unescape(encodeURIComponent(e));let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}function Se(e,t,n){function i(a,o,c,h){if(typeof a=="string"&&(a=Mr(a)),typeof o=="string"&&(o=xe(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let g=new Uint8Array(16+a.length);if(g.set(o),g.set(a,o.length),g=n(g),g[6]=g[6]&15|t,g[8]=g[8]&63|128,c){h=h||0;for(let m=0;m<16;++m)c[h+m]=g[m];return c}return te(g)}try{i.name=e}catch{}return i.DNS=Br,i.URL=qr,i}var Br,qr,Qe=B(()=>{Ee();Xe();Br="6ba7b810-9dad-11d1-80b4-00c04fd430c8",qr="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Lr(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Lt.default.createHash("md5").update(e).digest()}var Lt,Kt,kt=B(()=>{Lt=Z(require("crypto"));Kt=Lr});var Kr,jt,Vt=B(()=>{Qe();kt();Kr=Se("v3",48,Kt),jt=Kr});function kr(e,t,n){e=e||{};let i=e.random||(e.rng||pe)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let a=0;a<16;++a)t[n+a]=i[a];return t}return te(i)}var Gt,$t=B(()=>{$e();Ee();Gt=kr});function jr(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Yt.default.createHash("sha1").update(e).digest()}var Yt,Wt,Ht=B(()=>{Yt=Z(require("crypto"));Wt=jr});var Vr,Xt,Qt=B(()=>{Qe();Ht();Vr=Se("v5",80,Wt),Xt=Vr});var Jt,zt=B(()=>{Jt="00000000-0000-0000-0000-000000000000"});function Gr(e){if(!ee(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Zt,en=B(()=>{ye();Zt=Gr});var tn={};vr(tn,{NIL:()=>Jt,parse:()=>xe,stringify:()=>te,v1:()=>Bt,v3:()=>jt,v4:()=>Gt,v5:()=>Xt,validate:()=>ee,version:()=>Zt});var nn=B(()=>{qt();Vt();$t();Qt();zt();en();ye();Ee();Xe()});var on=S(V=>{"use strict";var $r=V&&V.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Yr=V&&V.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sn=V&&V.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&$r(t,e,n);return Yr(t,e),t};Object.defineProperty(V,"__esModule",{value:!0});V.prepareKeyValueMessage=V.issueFileCommand=void 0;var rn=sn(require("fs")),Je=sn(require("os")),Wr=(nn(),br(tn)),an=Ae();function Hr(e,t){let n=process.env[`GITHUB_${e}`];if(!n)throw new Error(`Unable to find environment variable for file command ${e}`);if(!rn.existsSync(n))throw new Error(`Missing file at path: ${n}`);rn.appendFileSync(n,`${an.toCommandValue(t)}${Je.EOL}`,{encoding:"utf8"})}V.issueFileCommand=Hr;function Xr(e,t){let n=`ghadelimiter_${Wr.v4()}`,i=an.toCommandValue(t);if(e.includes(n))throw new Error(`Unexpected input: name should not contain the delimiter "${n}"`);if(i.includes(n))throw new Error(`Unexpected input: value should not contain the delimiter "${n}"`);return`${e}<<${n}${Je.EOL}${i}${Je.EOL}${n}`}V.prepareKeyValueMessage=Xr});var cn=S(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.checkBypass=ce.getProxyUrl=void 0;function Qr(e){let t=e.protocol==="https:";if(un(e))return;let n=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(n)return new URL(n)}ce.getProxyUrl=Qr;function un(e){if(!e.hostname)return!1;let t=e.hostname;if(Jr(t))return!0;let n=process.env.no_proxy||process.env.NO_PROXY||"";if(!n)return!1;let i;e.port?i=Number(e.port):e.protocol==="http:"?i=80:e.protocol==="https:"&&(i=443);let a=[e.hostname.toUpperCase()];typeof i=="number"&&a.push(`${a[0]}:${i}`);for(let o of n.split(",").map(c=>c.trim().toUpperCase()).filter(c=>c))if(o==="*"||a.some(c=>c===o||c.endsWith(`.${o}`)||o.startsWith(".")&&c.endsWith(`${o}`)))return!0;return!1}ce.checkBypass=un;function Jr(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var hn=S(le=>{"use strict";var ia=require("net"),zr=require("tls"),ze=require("http"),ln=require("https"),Zr=require("events"),sa=require("assert"),ei=require("util");le.httpOverHttp=ti;le.httpsOverHttp=ni;le.httpOverHttps=ri;le.httpsOverHttps=ii;function ti(e){var t=new J(e);return t.request=ze.request,t}function ni(e){var t=new J(e);return t.request=ze.request,t.createSocket=fn,t.defaultPort=443,t}function ri(e){var t=new J(e);return t.request=ln.request,t}function ii(e){var t=new J(e);return t.request=ln.request,t.createSocket=fn,t.defaultPort=443,t}function J(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||ze.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(i,a,o,c){for(var h=dn(a,o,c),g=0,m=t.requests.length;g<m;++g){var p=t.requests[g];if(p.host===h.host&&p.port===h.port){t.requests.splice(g,1),p.request.onSocket(i);return}}i.destroy(),t.removeSocket(i)})}ei.inherits(J,Zr.EventEmitter);J.prototype.addRequest=function(t,n,i,a){var o=this,c=Ze({request:t},o.options,dn(n,i,a));if(o.sockets.length>=this.maxSockets){o.requests.push(c);return}o.createSocket(c,function(h){h.on("free",g),h.on("close",m),h.on("agentRemove",m),t.onSocket(h);function g(){o.emit("free",h,c)}function m(p){o.removeSocket(h),h.removeListener("free",g),h.removeListener("close",m),h.removeListener("agentRemove",m)}})};J.prototype.createSocket=function(t,n){var i=this,a={};i.sockets.push(a);var o=Ze({},i.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(o.localAddress=t.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),ne("making CONNECT request");var c=i.request(o);c.useChunkedEncodingByDefault=!1,c.once("response",h),c.once("upgrade",g),c.once("connect",m),c.once("error",p),c.end();function h(E){E.upgrade=!0}function g(E,_,N){process.nextTick(function(){m(E,_,N)})}function m(E,_,N){if(c.removeAllListeners(),_.removeAllListeners(),E.statusCode!==200){ne("tunneling socket could not be established, statusCode=%d",E.statusCode),_.destroy();var z=new Error("tunneling socket could not be established, statusCode="+E.statusCode);z.code="ECONNRESET",t.request.emit("error",z),i.removeSocket(a);return}if(N.length>0){ne("got illegal response body from proxy"),_.destroy();var z=new Error("got illegal response body from proxy");z.code="ECONNRESET",t.request.emit("error",z),i.removeSocket(a);return}return ne("tunneling connection has established"),i.sockets[i.sockets.indexOf(a)]=_,n(_)}function p(E){c.removeAllListeners(),ne(`tunneling socket could not be established, cause=%s
`,E.message,E.stack);var _=new Error("tunneling socket could not be established, cause="+E.message);_.code="ECONNRESET",t.request.emit("error",_),i.removeSocket(a)}};J.prototype.removeSocket=function(t){var n=this.sockets.indexOf(t);if(n!==-1){this.sockets.splice(n,1);var i=this.requests.shift();i&&this.createSocket(i,function(a){i.request.onSocket(a)})}};function fn(e,t){var n=this;J.prototype.createSocket.call(n,e,function(i){var a=e.request.getHeader("host"),o=Ze({},n.options,{socket:i,servername:a?a.replace(/:.*$/,""):e.host}),c=zr.connect(0,o);n.sockets[n.sockets.indexOf(i)]=c,t(c)})}function dn(e,t,n){return typeof e=="string"?{host:e,port:t,localAddress:n}:e}function Ze(e){for(var t=1,n=arguments.length;t<n;++t){var i=arguments[t];if(typeof i=="object")for(var a=Object.keys(i),o=0,c=a.length;o<c;++o){var h=a[o];i[h]!==void 0&&(e[h]=i[h])}}return e}var ne;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ne=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:ne=function(){};le.debug=ne});var gn=S((oa,mn)=>{mn.exports=hn()});var yn=S(A=>{"use strict";var si=A&&A.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),ai=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Pe=A&&A.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&si(t,e,n);return ai(t,e),t},C=A&&A.__awaiter||function(e,t,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(p){try{m(i.next(p))}catch(E){c(E)}}function g(p){try{m(i.throw(p))}catch(E){c(E)}}function m(p){p.done?o(p.value):a(p.value).then(h,g)}m((i=i.apply(e,t||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});A.HttpClient=A.isHttps=A.HttpClientResponse=A.HttpClientError=A.getProxyUrl=A.MediaTypes=A.Headers=A.HttpCodes=void 0;var Fe=Pe(require("http")),et=Pe(require("https")),pn=Pe(cn()),Ce=Pe(gn()),$;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})($=A.HttpCodes||(A.HttpCodes={}));var q;(function(e){e.Accept="accept",e.ContentType="content-type"})(q=A.Headers||(A.Headers={}));var re;(function(e){e.ApplicationJson="application/json"})(re=A.MediaTypes||(A.MediaTypes={}));function oi(e){let t=pn.getProxyUrl(new URL(e));return t?t.href:""}A.getProxyUrl=oi;var ui=[$.MovedPermanently,$.ResourceMoved,$.SeeOther,$.TemporaryRedirect,$.PermanentRedirect],ci=[$.BadGateway,$.ServiceUnavailable,$.GatewayTimeout],li=["OPTIONS","GET","DELETE","HEAD"],fi=10,di=5,De=class e extends Error{constructor(t,n){super(t),this.name="HttpClientError",this.statusCode=n,Object.setPrototypeOf(this,e.prototype)}};A.HttpClientError=De;var Re=class{constructor(t){this.message=t}readBody(){return C(this,void 0,void 0,function*(){return new Promise(t=>C(this,void 0,void 0,function*(){let n=Buffer.alloc(0);this.message.on("data",i=>{n=Buffer.concat([n,i])}),this.message.on("end",()=>{t(n.toString())})}))})}};A.HttpClientResponse=Re;function hi(e){return new URL(e).protocol==="https:"}A.isHttps=hi;var tt=class{constructor(t,n,i){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=n||[],this.requestOptions=i,i&&(i.ignoreSslError!=null&&(this._ignoreSslError=i.ignoreSslError),this._socketTimeout=i.socketTimeout,i.allowRedirects!=null&&(this._allowRedirects=i.allowRedirects),i.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=i.allowRedirectDowngrade),i.maxRedirects!=null&&(this._maxRedirects=Math.max(i.maxRedirects,0)),i.keepAlive!=null&&(this._keepAlive=i.keepAlive),i.allowRetries!=null&&(this._allowRetries=i.allowRetries),i.maxRetries!=null&&(this._maxRetries=i.maxRetries))}options(t,n){return C(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,n||{})})}get(t,n){return C(this,void 0,void 0,function*(){return this.request("GET",t,null,n||{})})}del(t,n){return C(this,void 0,void 0,function*(){return this.request("DELETE",t,null,n||{})})}post(t,n,i){return C(this,void 0,void 0,function*(){return this.request("POST",t,n,i||{})})}patch(t,n,i){return C(this,void 0,void 0,function*(){return this.request("PATCH",t,n,i||{})})}put(t,n,i){return C(this,void 0,void 0,function*(){return this.request("PUT",t,n,i||{})})}head(t,n){return C(this,void 0,void 0,function*(){return this.request("HEAD",t,null,n||{})})}sendStream(t,n,i,a){return C(this,void 0,void 0,function*(){return this.request(t,n,i,a)})}getJson(t,n={}){return C(this,void 0,void 0,function*(){n[q.Accept]=this._getExistingOrDefaultHeader(n,q.Accept,re.ApplicationJson);let i=yield this.get(t,n);return this._processResponse(i,this.requestOptions)})}postJson(t,n,i={}){return C(this,void 0,void 0,function*(){let a=JSON.stringify(n,null,2);i[q.Accept]=this._getExistingOrDefaultHeader(i,q.Accept,re.ApplicationJson),i[q.ContentType]=this._getExistingOrDefaultHeader(i,q.ContentType,re.ApplicationJson);let o=yield this.post(t,a,i);return this._processResponse(o,this.requestOptions)})}putJson(t,n,i={}){return C(this,void 0,void 0,function*(){let a=JSON.stringify(n,null,2);i[q.Accept]=this._getExistingOrDefaultHeader(i,q.Accept,re.ApplicationJson),i[q.ContentType]=this._getExistingOrDefaultHeader(i,q.ContentType,re.ApplicationJson);let o=yield this.put(t,a,i);return this._processResponse(o,this.requestOptions)})}patchJson(t,n,i={}){return C(this,void 0,void 0,function*(){let a=JSON.stringify(n,null,2);i[q.Accept]=this._getExistingOrDefaultHeader(i,q.Accept,re.ApplicationJson),i[q.ContentType]=this._getExistingOrDefaultHeader(i,q.ContentType,re.ApplicationJson);let o=yield this.patch(t,a,i);return this._processResponse(o,this.requestOptions)})}request(t,n,i,a){return C(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(n),c=this._prepareRequest(t,o,a),h=this._allowRetries&&li.includes(t)?this._maxRetries+1:1,g=0,m;do{if(m=yield this.requestRaw(c,i),m&&m.message&&m.message.statusCode===$.Unauthorized){let E;for(let _ of this.handlers)if(_.canHandleAuthentication(m)){E=_;break}return E?E.handleAuthentication(this,c,i):m}let p=this._maxRedirects;for(;m.message.statusCode&&ui.includes(m.message.statusCode)&&this._allowRedirects&&p>0;){let E=m.message.headers.location;if(!E)break;let _=new URL(E);if(o.protocol==="https:"&&o.protocol!==_.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield m.readBody(),_.hostname!==o.hostname)for(let N in a)N.toLowerCase()==="authorization"&&delete a[N];c=this._prepareRequest(t,_,a),m=yield this.requestRaw(c,i),p--}if(!m.message.statusCode||!ci.includes(m.message.statusCode))return m;g+=1,g<h&&(yield m.readBody(),yield this._performExponentialBackoff(g))}while(g<h);return m})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,n){return C(this,void 0,void 0,function*(){return new Promise((i,a)=>{function o(c,h){c?a(c):h?i(h):a(new Error("Unknown error"))}this.requestRawWithCallback(t,n,o)})})}requestRawWithCallback(t,n,i){typeof n=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(n,"utf8"));let a=!1;function o(g,m){a||(a=!0,i(g,m))}let c=t.httpModule.request(t.options,g=>{let m=new Re(g);o(void 0,m)}),h;c.on("socket",g=>{h=g}),c.setTimeout(this._socketTimeout||3*6e4,()=>{h&&h.end(),o(new Error(`Request timeout: ${t.options.path}`))}),c.on("error",function(g){o(g)}),n&&typeof n=="string"&&c.write(n,"utf8"),n&&typeof n!="string"?(n.on("close",function(){c.end()}),n.pipe(c)):c.end()}getAgent(t){let n=new URL(t);return this._getAgent(n)}_prepareRequest(t,n,i){let a={};a.parsedUrl=n;let o=a.parsedUrl.protocol==="https:";a.httpModule=o?et:Fe;let c=o?443:80;if(a.options={},a.options.host=a.parsedUrl.hostname,a.options.port=a.parsedUrl.port?parseInt(a.parsedUrl.port):c,a.options.path=(a.parsedUrl.pathname||"")+(a.parsedUrl.search||""),a.options.method=t,a.options.headers=this._mergeHeaders(i),this.userAgent!=null&&(a.options.headers["user-agent"]=this.userAgent),a.options.agent=this._getAgent(a.parsedUrl),this.handlers)for(let h of this.handlers)h.prepareRequest(a.options);return a}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Ie(this.requestOptions.headers),Ie(t||{})):Ie(t||{})}_getExistingOrDefaultHeader(t,n,i){let a;return this.requestOptions&&this.requestOptions.headers&&(a=Ie(this.requestOptions.headers)[n]),t[n]||a||i}_getAgent(t){let n,i=pn.getProxyUrl(t),a=i&&i.hostname;if(this._keepAlive&&a&&(n=this._proxyAgent),this._keepAlive&&!a&&(n=this._agent),n)return n;let o=t.protocol==="https:",c=100;if(this.requestOptions&&(c=this.requestOptions.maxSockets||Fe.globalAgent.maxSockets),i&&i.hostname){let h={maxSockets:c,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(i.username||i.password)&&{proxyAuth:`${i.username}:${i.password}`}),{host:i.hostname,port:i.port})},g,m=i.protocol==="https:";o?g=m?Ce.httpsOverHttps:Ce.httpsOverHttp:g=m?Ce.httpOverHttps:Ce.httpOverHttp,n=g(h),this._proxyAgent=n}if(this._keepAlive&&!n){let h={keepAlive:this._keepAlive,maxSockets:c};n=o?new et.Agent(h):new Fe.Agent(h),this._agent=n}return n||(n=o?et.globalAgent:Fe.globalAgent),o&&this._ignoreSslError&&(n.options=Object.assign(n.options||{},{rejectUnauthorized:!1})),n}_performExponentialBackoff(t){return C(this,void 0,void 0,function*(){t=Math.min(fi,t);let n=di*Math.pow(2,t);return new Promise(i=>setTimeout(()=>i(),n))})}_processResponse(t,n){return C(this,void 0,void 0,function*(){return new Promise((i,a)=>C(this,void 0,void 0,function*(){let o=t.message.statusCode||0,c={statusCode:o,result:null,headers:{}};o===$.NotFound&&i(c);function h(p,E){if(typeof E=="string"){let _=new Date(E);if(!isNaN(_.valueOf()))return _}return E}let g,m;try{m=yield t.readBody(),m&&m.length>0&&(n&&n.deserializeDates?g=JSON.parse(m,h):g=JSON.parse(m),c.result=g),c.headers=t.message.headers}catch{}if(o>299){let p;g&&g.message?p=g.message:m&&m.length>0?p=m:p=`Failed request: (${o})`;let E=new De(p,o);E.result=c.result,a(E)}else i(c)}))})}};A.HttpClient=tt;var Ie=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})});var En=S(W=>{"use strict";var st=W&&W.__awaiter||function(e,t,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(p){try{m(i.next(p))}catch(E){c(E)}}function g(p){try{m(i.throw(p))}catch(E){c(E)}}function m(p){p.done?o(p.value):a(p.value).then(h,g)}m((i=i.apply(e,t||[])).next())})};Object.defineProperty(W,"__esModule",{value:!0});W.PersonalAccessTokenCredentialHandler=W.BearerCredentialHandler=W.BasicCredentialHandler=void 0;var nt=class{constructor(t,n){this.username=t,this.password=n}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return st(this,void 0,void 0,function*(){throw new Error("not implemented")})}};W.BasicCredentialHandler=nt;var rt=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return st(this,void 0,void 0,function*(){throw new Error("not implemented")})}};W.BearerCredentialHandler=rt;var it=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return st(this,void 0,void 0,function*(){throw new Error("not implemented")})}};W.PersonalAccessTokenCredentialHandler=it});var vn=S(fe=>{"use strict";var Tn=fe&&fe.__awaiter||function(e,t,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(p){try{m(i.next(p))}catch(E){c(E)}}function g(p){try{m(i.throw(p))}catch(E){c(E)}}function m(p){p.done?o(p.value):a(p.value).then(h,g)}m((i=i.apply(e,t||[])).next())})};Object.defineProperty(fe,"__esModule",{value:!0});fe.OidcClient=void 0;var mi=yn(),gi=En(),_n=ot(),at=class e{static createHttpClient(t=!0,n=10){let i={allowRetries:t,maxRetries:n};return new mi.HttpClient("actions/oidc-client",[new gi.BearerCredentialHandler(e.getRequestToken())],i)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var n;return Tn(this,void 0,void 0,function*(){let o=(n=(yield e.createHttpClient().getJson(t).catch(c=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${c.statusCode}
 
        Error Message: ${c.result.message}`)})).result)===null||n===void 0?void 0:n.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(t){return Tn(this,void 0,void 0,function*(){try{let n=e.getIDTokenUrl();if(t){let a=encodeURIComponent(t);n=`${n}&audience=${a}`}_n.debug(`ID token url is ${n}`);let i=yield e.getCall(n);return _n.setSecret(i),i}catch(n){throw new Error(`Error message: ${n.message}`)}})}};fe.OidcClient=at});var ft=S(K=>{"use strict";var ut=K&&K.__awaiter||function(e,t,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(p){try{m(i.next(p))}catch(E){c(E)}}function g(p){try{m(i.throw(p))}catch(E){c(E)}}function m(p){p.done?o(p.value):a(p.value).then(h,g)}m((i=i.apply(e,t||[])).next())})};Object.defineProperty(K,"__esModule",{value:!0});K.summary=K.markdownSummary=K.SUMMARY_DOCS_URL=K.SUMMARY_ENV_VAR=void 0;var pi=require("os"),ct=require("fs"),{access:yi,appendFile:Ei,writeFile:Ti}=ct.promises;K.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";K.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var lt=class{constructor(){this._buffer=""}filePath(){return ut(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[K.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${K.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield yi(t,ct.constants.R_OK|ct.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,n,i={}){let a=Object.entries(i).map(([o,c])=>` ${o}="${c}"`).join("");return n?`<${t}${a}>${n}</${t}>`:`<${t}${a}>`}write(t){return ut(this,void 0,void 0,function*(){let n=!!t?.overwrite,i=yield this.filePath();return yield(n?Ti:Ei)(i,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return ut(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,n=!1){return this._buffer+=t,n?this.addEOL():this}addEOL(){return this.addRaw(pi.EOL)}addCodeBlock(t,n){let i=Object.assign({},n&&{lang:n}),a=this.wrap("pre",this.wrap("code",t),i);return this.addRaw(a).addEOL()}addList(t,n=!1){let i=n?"ol":"ul",a=t.map(c=>this.wrap("li",c)).join(""),o=this.wrap(i,a);return this.addRaw(o).addEOL()}addTable(t){let n=t.map(a=>{let o=a.map(c=>{if(typeof c=="string")return this.wrap("td",c);let{header:h,data:g,colspan:m,rowspan:p}=c,E=h?"th":"td",_=Object.assign(Object.assign({},m&&{colspan:m}),p&&{rowspan:p});return this.wrap(E,g,_)}).join("");return this.wrap("tr",o)}).join(""),i=this.wrap("table",n);return this.addRaw(i).addEOL()}addDetails(t,n){let i=this.wrap("details",this.wrap("summary",t)+n);return this.addRaw(i).addEOL()}addImage(t,n,i){let{width:a,height:o}=i||{},c=Object.assign(Object.assign({},a&&{width:a}),o&&{height:o}),h=this.wrap("img",null,Object.assign({src:t,alt:n},c));return this.addRaw(h).addEOL()}addHeading(t,n){let i=`h${n}`,a=["h1","h2","h3","h4","h5","h6"].includes(i)?i:"h1",o=this.wrap(a,t);return this.addRaw(o).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,n){let i=Object.assign({},n&&{cite:n}),a=this.wrap("blockquote",t,i);return this.addRaw(a).addEOL()}addLink(t,n){let i=this.wrap("a",t,{href:n});return this.addRaw(i).addEOL()}},bn=new lt;K.markdownSummary=bn;K.summary=bn});var wn=S(k=>{"use strict";var _i=k&&k.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),vi=k&&k.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bi=k&&k.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&_i(t,e,n);return vi(t,e),t};Object.defineProperty(k,"__esModule",{value:!0});k.toPlatformPath=k.toWin32Path=k.toPosixPath=void 0;var wi=bi(require("path"));function Ai(e){return e.replace(/[\\]/g,"/")}k.toPosixPath=Ai;function Oi(e){return e.replace(/[/]/g,"\\")}k.toWin32Path=Oi;function Ni(e){return e.replace(/[/\\]/g,wi.sep)}k.toPlatformPath=Ni});var ot=S(y=>{"use strict";var xi=y&&y.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Si=y&&y.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),An=y&&y.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&xi(t,e,n);return Si(t,e),t},On=y&&y.__awaiter||function(e,t,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(p){try{m(i.next(p))}catch(E){c(E)}}function g(p){try{m(i.throw(p))}catch(E){c(E)}}function m(p){p.done?o(p.value):a(p.value).then(h,g)}m((i=i.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.getIDToken=y.getState=y.saveState=y.group=y.endGroup=y.startGroup=y.info=y.notice=y.warning=y.error=y.debug=y.isDebug=y.setFailed=y.setCommandEcho=y.setOutput=y.getBooleanInput=y.getMultilineInput=y.getInput=y.addPath=y.setSecret=y.exportVariable=y.ExitCode=void 0;var G=Dt(),ae=on(),de=Ae(),Nn=An(require("os")),Fi=An(require("path")),Ci=vn(),xn;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(xn=y.ExitCode||(y.ExitCode={}));function Ii(e,t){let n=de.toCommandValue(t);if(process.env[e]=n,process.env.GITHUB_ENV||"")return ae.issueFileCommand("ENV",ae.prepareKeyValueMessage(e,t));G.issueCommand("set-env",{name:e},n)}y.exportVariable=Ii;function Di(e){G.issueCommand("add-mask",{},e)}y.setSecret=Di;function Ri(e){process.env.GITHUB_PATH||""?ae.issueFileCommand("PATH",e):G.issueCommand("add-path",{},e),process.env.PATH=`${e}${Fi.delimiter}${process.env.PATH}`}y.addPath=Ri;function dt(e,t){let n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?n:n.trim()}y.getInput=dt;function Pi(e,t){let n=dt(e,t).split(`
`).filter(i=>i!=="");return t&&t.trimWhitespace===!1?n:n.map(i=>i.trim())}y.getMultilineInput=Pi;function Ui(e,t){let n=["true","True","TRUE"],i=["false","False","FALSE"],a=dt(e,t);if(n.includes(a))return!0;if(i.includes(a))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}y.getBooleanInput=Ui;function Mi(e,t){if(process.env.GITHUB_OUTPUT||"")return ae.issueFileCommand("OUTPUT",ae.prepareKeyValueMessage(e,t));process.stdout.write(Nn.EOL),G.issueCommand("set-output",{name:e},de.toCommandValue(t))}y.setOutput=Mi;function Bi(e){G.issue("echo",e?"on":"off")}y.setCommandEcho=Bi;function qi(e){process.exitCode=xn.Failure,Sn(e)}y.setFailed=qi;function Li(){return process.env.RUNNER_DEBUG==="1"}y.isDebug=Li;function Ki(e){G.issueCommand("debug",{},e)}y.debug=Ki;function Sn(e,t={}){G.issueCommand("error",de.toCommandProperties(t),e instanceof Error?e.toString():e)}y.error=Sn;function ki(e,t={}){G.issueCommand("warning",de.toCommandProperties(t),e instanceof Error?e.toString():e)}y.warning=ki;function ji(e,t={}){G.issueCommand("notice",de.toCommandProperties(t),e instanceof Error?e.toString():e)}y.notice=ji;function Vi(e){process.stdout.write(e+Nn.EOL)}y.info=Vi;function Fn(e){G.issue("group",e)}y.startGroup=Fn;function Cn(){G.issue("endgroup")}y.endGroup=Cn;function Gi(e,t){return On(this,void 0,void 0,function*(){Fn(e);let n;try{n=yield t()}finally{Cn()}return n})}y.group=Gi;function $i(e,t){if(process.env.GITHUB_STATE||"")return ae.issueFileCommand("STATE",ae.prepareKeyValueMessage(e,t));G.issueCommand("save-state",{name:e},de.toCommandValue(t))}y.saveState=$i;function Yi(e){return process.env[`STATE_${e}`]||""}y.getState=Yi;function Wi(e){return On(this,void 0,void 0,function*(){return yield Ci.OidcClient.getIDToken(e)})}y.getIDToken=Wi;var Hi=ft();Object.defineProperty(y,"summary",{enumerable:!0,get:function(){return Hi.summary}});var Xi=ft();Object.defineProperty(y,"markdownSummary",{enumerable:!0,get:function(){return Xi.markdownSummary}});var ht=wn();Object.defineProperty(y,"toPosixPath",{enumerable:!0,get:function(){return ht.toPosixPath}});Object.defineProperty(y,"toWin32Path",{enumerable:!0,get:function(){return ht.toWin32Path}});Object.defineProperty(y,"toPlatformPath",{enumerable:!0,get:function(){return ht.toPlatformPath}})});var In=S(Ue=>{(function(e){e.parser=function(s,r){return new n(s,r)},e.SAXParser=n,e.SAXStream=m,e.createStream=g,e.MAX_BUFFER_LENGTH=64*1024;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(s,r){if(!(this instanceof n))return new n(s,r);var d=this;a(d),d.q=d.c="",d.bufferCheckPosition=e.MAX_BUFFER_LENGTH,d.opt=r||{},d.opt.lowercase=d.opt.lowercase||d.opt.lowercasetags,d.looseCase=d.opt.lowercase?"toLowerCase":"toUpperCase",d.tags=[],d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.strict=!!s,d.noscript=!!(s||d.opt.noscript),d.state=l.BEGIN,d.strictEntities=d.opt.strictEntities,d.ENTITIES=d.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),d.attribList=[],d.opt.xmlns&&(d.ns=Object.create(z)),d.trackPosition=d.opt.position!==!1,d.trackPosition&&(d.position=d.line=d.column=0),me(d,"onready")}Object.create||(Object.create=function(s){function r(){}r.prototype=s;var d=new r;return d}),Object.keys||(Object.keys=function(s){var r=[];for(var d in s)s.hasOwnProperty(d)&&r.push(d);return r});function i(s){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),d=0,u=0,w=t.length;u<w;u++){var F=s[t[u]].length;if(F>r)switch(t[u]){case"textNode":ge(s);break;case"cdata":x(s,"oncdata",s.cdata),s.cdata="";break;case"script":x(s,"onscript",s.script),s.script="";break;default:be(s,"Max buffer length exceeded: "+t[u])}d=Math.max(d,F)}var I=e.MAX_BUFFER_LENGTH-d;s.bufferCheckPosition=I+s.position}function a(s){for(var r=0,d=t.length;r<d;r++)s[t[r]]=""}function o(s){ge(s),s.cdata!==""&&(x(s,"oncdata",s.cdata),s.cdata=""),s.script!==""&&(x(s,"onscript",s.script),s.script="")}n.prototype={end:function(){wt(this)},write:mr,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var c;try{c=require("stream").Stream}catch{c=function(){}}var h=e.EVENTS.filter(function(s){return s!=="error"&&s!=="end"});function g(s,r){return new m(s,r)}function m(s,r){if(!(this instanceof m))return new m(s,r);c.apply(this),this._parser=new n(s,r),this.writable=!0,this.readable=!0;var d=this;this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(u){d.emit("error",u),d._parser.error=null},this._decoder=null,h.forEach(function(u){Object.defineProperty(d,"on"+u,{get:function(){return d._parser["on"+u]},set:function(w){if(!w)return d.removeAllListeners(u),d._parser["on"+u]=w,w;d.on(u,w)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(c.prototype,{constructor:{value:m}}),m.prototype.write=function(s){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(s)){if(!this._decoder){var r=require("string_decoder").StringDecoder;this._decoder=new r("utf8")}s=this._decoder.write(s)}return this._parser.write(s.toString()),this.emit("data",s),!0},m.prototype.end=function(s){return s&&s.length&&this.write(s),this._parser.end(),!0},m.prototype.on=function(s,r){var d=this;return!d._parser["on"+s]&&h.indexOf(s)!==-1&&(d._parser["on"+s]=function(){var u=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);u.splice(0,0,s),d.emit.apply(d,u)}),c.prototype.on.call(d,s,r)};var p="[CDATA[",E="DOCTYPE",_="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/2000/xmlns/",z={xml:_,xmlns:N},ie=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Le=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ur=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,cr=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function M(s){return s===" "||s===`
`||s==="\r"||s==="	"}function ve(s){return s==='"'||s==="'"}function lr(s){return s===">"||M(s)}function X(s,r){return s.test(r)}function fr(s,r){return!X(s,r)}var l=0;e.STATE={BEGIN:l++,BEGIN_WHITESPACE:l++,TEXT:l++,TEXT_ENTITY:l++,OPEN_WAKA:l++,SGML_DECL:l++,SGML_DECL_QUOTED:l++,DOCTYPE:l++,DOCTYPE_QUOTED:l++,DOCTYPE_DTD:l++,DOCTYPE_DTD_QUOTED:l++,COMMENT_STARTING:l++,COMMENT:l++,COMMENT_ENDING:l++,COMMENT_ENDED:l++,CDATA:l++,CDATA_ENDING:l++,CDATA_ENDING_2:l++,PROC_INST:l++,PROC_INST_BODY:l++,PROC_INST_ENDING:l++,OPEN_TAG:l++,OPEN_TAG_SLASH:l++,ATTRIB:l++,ATTRIB_NAME:l++,ATTRIB_NAME_SAW_WHITE:l++,ATTRIB_VALUE:l++,ATTRIB_VALUE_QUOTED:l++,ATTRIB_VALUE_CLOSED:l++,ATTRIB_VALUE_UNQUOTED:l++,ATTRIB_VALUE_ENTITY_Q:l++,ATTRIB_VALUE_ENTITY_U:l++,CLOSE_TAG:l++,CLOSE_TAG_SAW_WHITE:l++,SCRIPT:l++,SCRIPT_ENDING:l++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(s){var r=e.ENTITIES[s],d=typeof r=="number"?String.fromCharCode(r):r;e.ENTITIES[s]=d});for(var vt in e.STATE)e.STATE[e.STATE[vt]]=vt;l=e.STATE;function me(s,r,d){s[r]&&s[r](d)}function x(s,r,d){s.textNode&&ge(s),me(s,r,d)}function ge(s){s.textNode=bt(s.opt,s.textNode),s.textNode&&me(s,"ontext",s.textNode),s.textNode=""}function bt(s,r){return s.trim&&(r=r.trim()),s.normalize&&(r=r.replace(/\s+/g," ")),r}function be(s,r){return ge(s),s.trackPosition&&(r+=`
Line: `+s.line+`
Column: `+s.column+`
Char: `+s.c),r=new Error(r),s.error=r,me(s,"onerror",r),s}function wt(s){return s.sawRoot&&!s.closedRoot&&O(s,"Unclosed root tag"),s.state!==l.BEGIN&&s.state!==l.BEGIN_WHITESPACE&&s.state!==l.TEXT&&be(s,"Unexpected end"),ge(s),s.c="",s.closed=!0,me(s,"onend"),n.call(s,s.strict,s.opt),s}function O(s,r){if(typeof s!="object"||!(s instanceof n))throw new Error("bad call to strictFail");s.strict&&be(s,r)}function dr(s){s.strict||(s.tagName=s.tagName[s.looseCase]());var r=s.tags[s.tags.length-1]||s,d=s.tag={name:s.tagName,attributes:{}};s.opt.xmlns&&(d.ns=r.ns),s.attribList.length=0,x(s,"onopentagstart",d)}function Ke(s,r){var d=s.indexOf(":"),u=d<0?["",s]:s.split(":"),w=u[0],F=u[1];return r&&s==="xmlns"&&(w="xmlns",F=""),{prefix:w,local:F}}function ke(s){if(s.strict||(s.attribName=s.attribName[s.looseCase]()),s.attribList.indexOf(s.attribName)!==-1||s.tag.attributes.hasOwnProperty(s.attribName)){s.attribName=s.attribValue="";return}if(s.opt.xmlns){var r=Ke(s.attribName,!0),d=r.prefix,u=r.local;if(d==="xmlns")if(u==="xml"&&s.attribValue!==_)O(s,"xml: prefix must be bound to "+_+`
Actual: `+s.attribValue);else if(u==="xmlns"&&s.attribValue!==N)O(s,"xmlns: prefix must be bound to "+N+`
Actual: `+s.attribValue);else{var w=s.tag,F=s.tags[s.tags.length-1]||s;w.ns===F.ns&&(w.ns=Object.create(F.ns)),w.ns[u]=s.attribValue}s.attribList.push([s.attribName,s.attribValue])}else s.tag.attributes[s.attribName]=s.attribValue,x(s,"onattribute",{name:s.attribName,value:s.attribValue});s.attribName=s.attribValue=""}function se(s,r){if(s.opt.xmlns){var d=s.tag,u=Ke(s.tagName);d.prefix=u.prefix,d.local=u.local,d.uri=d.ns[u.prefix]||"",d.prefix&&!d.uri&&(O(s,"Unbound namespace prefix: "+JSON.stringify(s.tagName)),d.uri=u.prefix);var w=s.tags[s.tags.length-1]||s;d.ns&&w.ns!==d.ns&&Object.keys(d.ns).forEach(function(xt){x(s,"onopennamespace",{prefix:xt,uri:d.ns[xt]})});for(var F=0,I=s.attribList.length;F<I;F++){var L=s.attribList[F],Y=L[0],oe=L[1],D=Ke(Y,!0),Q=D.prefix,gr=D.local,Nt=Q===""?"":d.ns[Q]||"",Ve={name:Y,value:oe,prefix:Q,local:gr,uri:Nt};Q&&Q!=="xmlns"&&!Nt&&(O(s,"Unbound namespace prefix: "+JSON.stringify(Q)),Ve.uri=Q),s.tag.attributes[Y]=Ve,x(s,"onattribute",Ve)}s.attribList.length=0}s.tag.isSelfClosing=!!r,s.sawRoot=!0,s.tags.push(s.tag),x(s,"onopentag",s.tag),r||(!s.noscript&&s.tagName.toLowerCase()==="script"?s.state=l.SCRIPT:s.state=l.TEXT,s.tag=null,s.tagName=""),s.attribName=s.attribValue="",s.attribList.length=0}function je(s){if(!s.tagName){O(s,"Weird empty close tag."),s.textNode+="</>",s.state=l.TEXT;return}if(s.script){if(s.tagName!=="script"){s.script+="</"+s.tagName+">",s.tagName="",s.state=l.SCRIPT;return}x(s,"onscript",s.script),s.script=""}var r=s.tags.length,d=s.tagName;s.strict||(d=d[s.looseCase]());for(var u=d;r--;){var w=s.tags[r];if(w.name!==u)O(s,"Unexpected close tag");else break}if(r<0){O(s,"Unmatched closing tag: "+s.tagName),s.textNode+="</"+s.tagName+">",s.state=l.TEXT;return}s.tagName=d;for(var F=s.tags.length;F-- >r;){var I=s.tag=s.tags.pop();s.tagName=s.tag.name,x(s,"onclosetag",s.tagName);var L={};for(var Y in I.ns)L[Y]=I.ns[Y];var oe=s.tags[s.tags.length-1]||s;s.opt.xmlns&&I.ns!==oe.ns&&Object.keys(I.ns).forEach(function(D){var Q=I.ns[D];x(s,"onclosenamespace",{prefix:D,uri:Q})})}r===0&&(s.closedRoot=!0),s.tagName=s.attribValue=s.attribName="",s.attribList.length=0,s.state=l.TEXT}function hr(s){var r=s.entity,d=r.toLowerCase(),u,w="";return s.ENTITIES[r]?s.ENTITIES[r]:s.ENTITIES[d]?s.ENTITIES[d]:(r=d,r.charAt(0)==="#"&&(r.charAt(1)==="x"?(r=r.slice(2),u=parseInt(r,16),w=u.toString(16)):(r=r.slice(1),u=parseInt(r,10),w=u.toString(10))),r=r.replace(/^0+/,""),isNaN(u)||w.toLowerCase()!==r?(O(s,"Invalid character entity"),"&"+s.entity+";"):String.fromCodePoint(u))}function At(s,r){r==="<"?(s.state=l.OPEN_WAKA,s.startTagPosition=s.position):M(r)||(O(s,"Non-whitespace before first tag."),s.textNode=r,s.state=l.TEXT)}function Ot(s,r){var d="";return r<s.length&&(d=s.charAt(r)),d}function mr(s){var r=this;if(this.error)throw this.error;if(r.closed)return be(r,"Cannot write after close. Assign an onready handler.");if(s===null)return wt(r);typeof s=="object"&&(s=s.toString());for(var d=0,u="";u=Ot(s,d++),r.c=u,!!u;)switch(r.trackPosition&&(r.position++,u===`
`?(r.line++,r.column=0):r.column++),r.state){case l.BEGIN:if(r.state=l.BEGIN_WHITESPACE,u==="\uFEFF")continue;At(r,u);continue;case l.BEGIN_WHITESPACE:At(r,u);continue;case l.TEXT:if(r.sawRoot&&!r.closedRoot){for(var w=d-1;u&&u!=="<"&&u!=="&";)u=Ot(s,d++),u&&r.trackPosition&&(r.position++,u===`
`?(r.line++,r.column=0):r.column++);r.textNode+=s.substring(w,d-1)}u==="<"&&!(r.sawRoot&&r.closedRoot&&!r.strict)?(r.state=l.OPEN_WAKA,r.startTagPosition=r.position):(!M(u)&&(!r.sawRoot||r.closedRoot)&&O(r,"Text data outside of root node."),u==="&"?r.state=l.TEXT_ENTITY:r.textNode+=u);continue;case l.SCRIPT:u==="<"?r.state=l.SCRIPT_ENDING:r.script+=u;continue;case l.SCRIPT_ENDING:u==="/"?r.state=l.CLOSE_TAG:(r.script+="<"+u,r.state=l.SCRIPT);continue;case l.OPEN_WAKA:if(u==="!")r.state=l.SGML_DECL,r.sgmlDecl="";else if(!M(u))if(X(ie,u))r.state=l.OPEN_TAG,r.tagName=u;else if(u==="/")r.state=l.CLOSE_TAG,r.tagName="";else if(u==="?")r.state=l.PROC_INST,r.procInstName=r.procInstBody="";else{if(O(r,"Unencoded <"),r.startTagPosition+1<r.position){var F=r.position-r.startTagPosition;u=new Array(F).join(" ")+u}r.textNode+="<"+u,r.state=l.TEXT}continue;case l.SGML_DECL:(r.sgmlDecl+u).toUpperCase()===p?(x(r,"onopencdata"),r.state=l.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+u==="--"?(r.state=l.COMMENT,r.comment="",r.sgmlDecl=""):(r.sgmlDecl+u).toUpperCase()===E?(r.state=l.DOCTYPE,(r.doctype||r.sawRoot)&&O(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):u===">"?(x(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=l.TEXT):(ve(u)&&(r.state=l.SGML_DECL_QUOTED),r.sgmlDecl+=u);continue;case l.SGML_DECL_QUOTED:u===r.q&&(r.state=l.SGML_DECL,r.q=""),r.sgmlDecl+=u;continue;case l.DOCTYPE:u===">"?(r.state=l.TEXT,x(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=u,u==="["?r.state=l.DOCTYPE_DTD:ve(u)&&(r.state=l.DOCTYPE_QUOTED,r.q=u));continue;case l.DOCTYPE_QUOTED:r.doctype+=u,u===r.q&&(r.q="",r.state=l.DOCTYPE);continue;case l.DOCTYPE_DTD:r.doctype+=u,u==="]"?r.state=l.DOCTYPE:ve(u)&&(r.state=l.DOCTYPE_DTD_QUOTED,r.q=u);continue;case l.DOCTYPE_DTD_QUOTED:r.doctype+=u,u===r.q&&(r.state=l.DOCTYPE_DTD,r.q="");continue;case l.COMMENT:u==="-"?r.state=l.COMMENT_ENDING:r.comment+=u;continue;case l.COMMENT_ENDING:u==="-"?(r.state=l.COMMENT_ENDED,r.comment=bt(r.opt,r.comment),r.comment&&x(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+u,r.state=l.COMMENT);continue;case l.COMMENT_ENDED:u!==">"?(O(r,"Malformed comment"),r.comment+="--"+u,r.state=l.COMMENT):r.state=l.TEXT;continue;case l.CDATA:u==="]"?r.state=l.CDATA_ENDING:r.cdata+=u;continue;case l.CDATA_ENDING:u==="]"?r.state=l.CDATA_ENDING_2:(r.cdata+="]"+u,r.state=l.CDATA);continue;case l.CDATA_ENDING_2:u===">"?(r.cdata&&x(r,"oncdata",r.cdata),x(r,"onclosecdata"),r.cdata="",r.state=l.TEXT):u==="]"?r.cdata+="]":(r.cdata+="]]"+u,r.state=l.CDATA);continue;case l.PROC_INST:u==="?"?r.state=l.PROC_INST_ENDING:M(u)?r.state=l.PROC_INST_BODY:r.procInstName+=u;continue;case l.PROC_INST_BODY:if(!r.procInstBody&&M(u))continue;u==="?"?r.state=l.PROC_INST_ENDING:r.procInstBody+=u;continue;case l.PROC_INST_ENDING:u===">"?(x(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=l.TEXT):(r.procInstBody+="?"+u,r.state=l.PROC_INST_BODY);continue;case l.OPEN_TAG:X(Le,u)?r.tagName+=u:(dr(r),u===">"?se(r):u==="/"?r.state=l.OPEN_TAG_SLASH:(M(u)||O(r,"Invalid character in tag name"),r.state=l.ATTRIB));continue;case l.OPEN_TAG_SLASH:u===">"?(se(r,!0),je(r)):(O(r,"Forward-slash in opening tag not followed by >"),r.state=l.ATTRIB);continue;case l.ATTRIB:if(M(u))continue;u===">"?se(r):u==="/"?r.state=l.OPEN_TAG_SLASH:X(ie,u)?(r.attribName=u,r.attribValue="",r.state=l.ATTRIB_NAME):O(r,"Invalid attribute name");continue;case l.ATTRIB_NAME:u==="="?r.state=l.ATTRIB_VALUE:u===">"?(O(r,"Attribute without value"),r.attribValue=r.attribName,ke(r),se(r)):M(u)?r.state=l.ATTRIB_NAME_SAW_WHITE:X(Le,u)?r.attribName+=u:O(r,"Invalid attribute name");continue;case l.ATTRIB_NAME_SAW_WHITE:if(u==="=")r.state=l.ATTRIB_VALUE;else{if(M(u))continue;O(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",x(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",u===">"?se(r):X(ie,u)?(r.attribName=u,r.state=l.ATTRIB_NAME):(O(r,"Invalid attribute name"),r.state=l.ATTRIB)}continue;case l.ATTRIB_VALUE:if(M(u))continue;ve(u)?(r.q=u,r.state=l.ATTRIB_VALUE_QUOTED):(O(r,"Unquoted attribute value"),r.state=l.ATTRIB_VALUE_UNQUOTED,r.attribValue=u);continue;case l.ATTRIB_VALUE_QUOTED:if(u!==r.q){u==="&"?r.state=l.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=u;continue}ke(r),r.q="",r.state=l.ATTRIB_VALUE_CLOSED;continue;case l.ATTRIB_VALUE_CLOSED:M(u)?r.state=l.ATTRIB:u===">"?se(r):u==="/"?r.state=l.OPEN_TAG_SLASH:X(ie,u)?(O(r,"No whitespace between attributes"),r.attribName=u,r.attribValue="",r.state=l.ATTRIB_NAME):O(r,"Invalid attribute name");continue;case l.ATTRIB_VALUE_UNQUOTED:if(!lr(u)){u==="&"?r.state=l.ATTRIB_VALUE_ENTITY_U:r.attribValue+=u;continue}ke(r),u===">"?se(r):r.state=l.ATTRIB;continue;case l.CLOSE_TAG:if(r.tagName)u===">"?je(r):X(Le,u)?r.tagName+=u:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=l.SCRIPT):(M(u)||O(r,"Invalid tagname in closing tag"),r.state=l.CLOSE_TAG_SAW_WHITE);else{if(M(u))continue;fr(ie,u)?r.script?(r.script+="</"+u,r.state=l.SCRIPT):O(r,"Invalid tagname in closing tag."):r.tagName=u}continue;case l.CLOSE_TAG_SAW_WHITE:if(M(u))continue;u===">"?je(r):O(r,"Invalid characters in closing tag");continue;case l.TEXT_ENTITY:case l.ATTRIB_VALUE_ENTITY_Q:case l.ATTRIB_VALUE_ENTITY_U:var I,L;switch(r.state){case l.TEXT_ENTITY:I=l.TEXT,L="textNode";break;case l.ATTRIB_VALUE_ENTITY_Q:I=l.ATTRIB_VALUE_QUOTED,L="attribValue";break;case l.ATTRIB_VALUE_ENTITY_U:I=l.ATTRIB_VALUE_UNQUOTED,L="attribValue";break}u===";"?(r[L]+=hr(r),r.entity="",r.state=I):X(r.entity.length?cr:ur,u)?r.entity+=u:(O(r,"Invalid character in entity name"),r[L]+="&"+r.entity+u,r.entity="",r.state=I);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&i(r),r}String.fromCodePoint||function(){var s=String.fromCharCode,r=Math.floor,d=function(){var u=16384,w=[],F,I,L=-1,Y=arguments.length;if(!Y)return"";for(var oe="";++L<Y;){var D=Number(arguments[L]);if(!isFinite(D)||D<0||D>1114111||r(D)!==D)throw RangeError("Invalid code point: "+D);D<=65535?w.push(D):(D-=65536,F=(D>>10)+55296,I=D%1024+56320,w.push(F,I)),(L+1===Y||w.length>u)&&(oe+=s.apply(null,w),w.length=0)}return oe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})(typeof Ue>"u"?Ue.sax={}:Ue)});var Me=S((ga,Dn)=>{Dn.exports={isArray:function(e){return Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"}}});var Be=S((pa,Rn)=>{var Qi=Me().isArray;Rn.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){(!(e in t)||typeof t[e]!="boolean")&&(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!Qi(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,t){(!(e+"Key"in t)||typeof t[e+"Key"]!="string")&&(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}});var gt=S((ya,kn)=>{var Ji=In(),zi={on:function(){},parse:function(){}},v=Be(),he=Me().isArray,f,mt=!0,T;function Zi(e){return f=v.copyOptions(e),v.ensureFlagExists("ignoreDeclaration",f),v.ensureFlagExists("ignoreInstruction",f),v.ensureFlagExists("ignoreAttributes",f),v.ensureFlagExists("ignoreText",f),v.ensureFlagExists("ignoreComment",f),v.ensureFlagExists("ignoreCdata",f),v.ensureFlagExists("ignoreDoctype",f),v.ensureFlagExists("compact",f),v.ensureFlagExists("alwaysChildren",f),v.ensureFlagExists("addParent",f),v.ensureFlagExists("trim",f),v.ensureFlagExists("nativeType",f),v.ensureFlagExists("nativeTypeAttributes",f),v.ensureFlagExists("sanitize",f),v.ensureFlagExists("instructionHasAttributes",f),v.ensureFlagExists("captureSpacesBetweenElements",f),v.ensureAlwaysArrayExists(f),v.ensureKeyExists("declaration",f),v.ensureKeyExists("instruction",f),v.ensureKeyExists("attributes",f),v.ensureKeyExists("text",f),v.ensureKeyExists("comment",f),v.ensureKeyExists("cdata",f),v.ensureKeyExists("doctype",f),v.ensureKeyExists("type",f),v.ensureKeyExists("name",f),v.ensureKeyExists("elements",f),v.ensureKeyExists("parent",f),v.checkFnExists("doctype",f),v.checkFnExists("instruction",f),v.checkFnExists("cdata",f),v.checkFnExists("comment",f),v.checkFnExists("text",f),v.checkFnExists("instructionName",f),v.checkFnExists("elementName",f),v.checkFnExists("attributeName",f),v.checkFnExists("attributeValue",f),v.checkFnExists("attributes",f),f}function Ln(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return n==="true"?!0:n==="false"?!1:e}function Te(e,t){var n;if(f.compact){if(!T[f[e+"Key"]]&&(he(f.alwaysArray)?f.alwaysArray.indexOf(f[e+"Key"])!==-1:f.alwaysArray)&&(T[f[e+"Key"]]=[]),T[f[e+"Key"]]&&!he(T[f[e+"Key"]])&&(T[f[e+"Key"]]=[T[f[e+"Key"]]]),e+"Fn"in f&&typeof t=="string"&&(t=f[e+"Fn"](t,T)),e==="instruction"&&("instructionFn"in f||"instructionNameFn"in f)){for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in f)t[n]=f.instructionFn(t[n],n,T);else{var i=t[n];delete t[n],t[f.instructionNameFn(n,i,T)]=i}}he(T[f[e+"Key"]])?T[f[e+"Key"]].push(t):T[f[e+"Key"]]=t}else{T[f.elementsKey]||(T[f.elementsKey]=[]);var a={};if(a[f.typeKey]=e,e==="instruction"){for(n in t)if(t.hasOwnProperty(n))break;a[f.nameKey]="instructionNameFn"in f?f.instructionNameFn(n,t,T):n,f.instructionHasAttributes?(a[f.attributesKey]=t[n][f.attributesKey],"instructionFn"in f&&(a[f.attributesKey]=f.instructionFn(a[f.attributesKey],n,T))):("instructionFn"in f&&(t[n]=f.instructionFn(t[n],n,T)),a[f.instructionKey]=t[n])}else e+"Fn"in f&&(t=f[e+"Fn"](t,T)),a[f[e+"Key"]]=t;f.addParent&&(a[f.parentKey]=T),T[f.elementsKey].push(a)}}function Kn(e){if("attributesFn"in f&&e&&(e=f.attributesFn(e,T)),(f.trim||"attributeValueFn"in f||"attributeNameFn"in f||f.nativeTypeAttributes)&&e){var t;for(t in e)if(e.hasOwnProperty(t)&&(f.trim&&(e[t]=e[t].trim()),f.nativeTypeAttributes&&(e[t]=Ln(e[t])),"attributeValueFn"in f&&(e[t]=f.attributeValueFn(e[t],t,T)),"attributeNameFn"in f)){var n=e[t];delete e[t],e[f.attributeNameFn(t,e[t],T)]=n}}return e}function es(e){var t={};if(e.body&&(e.name.toLowerCase()==="xml"||f.instructionHasAttributes)){for(var n=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,i;(i=n.exec(e.body))!==null;)t[i[1]]=i[2]||i[3]||i[4];t=Kn(t)}if(e.name.toLowerCase()==="xml"){if(f.ignoreDeclaration)return;T[f.declarationKey]={},Object.keys(t).length&&(T[f.declarationKey][f.attributesKey]=t),f.addParent&&(T[f.declarationKey][f.parentKey]=T)}else{if(f.ignoreInstruction)return;f.trim&&(e.body=e.body.trim());var a={};f.instructionHasAttributes&&Object.keys(t).length?(a[e.name]={},a[e.name][f.attributesKey]=t):a[e.name]=e.body,Te("instruction",a)}}function Pn(e,t){var n;if(typeof e=="object"&&(t=e.attributes,e=e.name),t=Kn(t),"elementNameFn"in f&&(e=f.elementNameFn(e,T)),f.compact){if(n={},!f.ignoreAttributes&&t&&Object.keys(t).length){n[f.attributesKey]={};var i;for(i in t)t.hasOwnProperty(i)&&(n[f.attributesKey][i]=t[i])}!(e in T)&&(he(f.alwaysArray)?f.alwaysArray.indexOf(e)!==-1:f.alwaysArray)&&(T[e]=[]),T[e]&&!he(T[e])&&(T[e]=[T[e]]),he(T[e])?T[e].push(n):T[e]=n}else T[f.elementsKey]||(T[f.elementsKey]=[]),n={},n[f.typeKey]="element",n[f.nameKey]=e,!f.ignoreAttributes&&t&&Object.keys(t).length&&(n[f.attributesKey]=t),f.alwaysChildren&&(n[f.elementsKey]=[]),T[f.elementsKey].push(n);n[f.parentKey]=T,T=n}function Un(e){f.ignoreText||!e.trim()&&!f.captureSpacesBetweenElements||(f.trim&&(e=e.trim()),f.nativeType&&(e=Ln(e)),f.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),Te("text",e))}function Mn(e){f.ignoreComment||(f.trim&&(e=e.trim()),Te("comment",e))}function Bn(e){var t=T[f.parentKey];f.addParent||delete T[f.parentKey],T=t}function ts(e){f.ignoreCdata||(f.trim&&(e=e.trim()),Te("cdata",e))}function ns(e){f.ignoreDoctype||(e=e.replace(/^ /,""),f.trim&&(e=e.trim()),Te("doctype",e))}function qn(e){e.note=e}kn.exports=function(e,t){var n=mt?Ji.parser(!0,{}):n=new zi.Parser("UTF-8"),i={};if(T=i,f=Zi(t),mt?(n.opt={strictEntities:!0},n.onopentag=Pn,n.ontext=Un,n.oncomment=Mn,n.onclosetag=Bn,n.onerror=qn,n.oncdata=ts,n.ondoctype=ns,n.onprocessinginstruction=es):(n.on("startElement",Pn),n.on("text",Un),n.on("comment",Mn),n.on("endElement",Bn),n.on("error",qn)),mt)n.write(e).close();else if(!n.parse(e))throw new Error("XML parsing error: "+n.getError());if(i[f.elementsKey]){var a=i[f.elementsKey];delete i[f.elementsKey],i[f.elementsKey]=a,delete i.text}return i}});var Gn=S((Ea,Vn)=>{var jn=Be(),rs=gt();function is(e){var t=jn.copyOptions(e);return jn.ensureSpacesExists(t),t}Vn.exports=function(e,t){var n,i,a,o;return n=is(t),i=rs(e,n),o="compact"in n&&n.compact?"_parent":"parent","addParent"in n&&n.addParent?a=JSON.stringify(i,function(c,h){return c===o?"_":h},n.spaces):a=JSON.stringify(i,null,n.spaces),a.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}});var yt=S((Ta,Zn)=>{var b=Be(),ss=Me().isArray,P,U;function as(e){var t=b.copyOptions(e);return b.ensureFlagExists("ignoreDeclaration",t),b.ensureFlagExists("ignoreInstruction",t),b.ensureFlagExists("ignoreAttributes",t),b.ensureFlagExists("ignoreText",t),b.ensureFlagExists("ignoreComment",t),b.ensureFlagExists("ignoreCdata",t),b.ensureFlagExists("ignoreDoctype",t),b.ensureFlagExists("compact",t),b.ensureFlagExists("indentText",t),b.ensureFlagExists("indentCdata",t),b.ensureFlagExists("indentAttributes",t),b.ensureFlagExists("indentInstruction",t),b.ensureFlagExists("fullTagEmptyElement",t),b.ensureFlagExists("noQuotesForNativeAttributes",t),b.ensureSpacesExists(t),typeof t.spaces=="number"&&(t.spaces=Array(t.spaces+1).join(" ")),b.ensureKeyExists("declaration",t),b.ensureKeyExists("instruction",t),b.ensureKeyExists("attributes",t),b.ensureKeyExists("text",t),b.ensureKeyExists("comment",t),b.ensureKeyExists("cdata",t),b.ensureKeyExists("doctype",t),b.ensureKeyExists("type",t),b.ensureKeyExists("name",t),b.ensureKeyExists("elements",t),b.checkFnExists("doctype",t),b.checkFnExists("instruction",t),b.checkFnExists("cdata",t),b.checkFnExists("comment",t),b.checkFnExists("text",t),b.checkFnExists("instructionName",t),b.checkFnExists("elementName",t),b.checkFnExists("attributeName",t),b.checkFnExists("attributeValue",t),b.checkFnExists("attributes",t),b.checkFnExists("fullTagEmptyElement",t),t}function H(e,t,n){return(!n&&e.spaces?`
`:"")+Array(t+1).join(e.spaces)}function qe(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,U,P));var i,a,o,c,h=[];for(i in e)e.hasOwnProperty(i)&&e[i]!==null&&e[i]!==void 0&&(c=t.noQuotesForNativeAttributes&&typeof e[i]!="string"?"":'"',a=""+e[i],a=a.replace(/"/g,"&quot;"),o="attributeNameFn"in t?t.attributeNameFn(i,a,U,P):i,h.push(t.spaces&&t.indentAttributes?H(t,n+1,!1):" "),h.push(o+"="+c+("attributeValueFn"in t?t.attributeValueFn(a,i,U,P):a)+c));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&h.push(H(t,n,!1)),h.join("")}function $n(e,t,n){return P=e,U="xml",t.ignoreDeclaration?"":"<?xml"+qe(e[t.attributesKey],t,n)+"?>"}function Yn(e,t,n){if(t.ignoreInstruction)return"";var i;for(i in e)if(e.hasOwnProperty(i))break;var a="instructionNameFn"in t?t.instructionNameFn(i,e[i],U,P):i;if(typeof e[i]=="object")return P=e,U=a,"<?"+a+qe(e[i][t.attributesKey],t,n)+"?>";var o=e[i]?e[i]:"";return"instructionFn"in t&&(o=t.instructionFn(o,i,U,P)),"<?"+a+(o?" "+o:"")+"?>"}function Wn(e,t){return t.ignoreComment?"":"<!--"+("commentFn"in t?t.commentFn(e,U,P):e)+"-->"}function Hn(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,U,P):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Xn(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,U,P):e)+">"}function pt(e,t){return t.ignoreText?"":(e=""+e,e=e.replace(/&amp;/g,"&"),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,U,P):e)}function os(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function us(e,t,n){P=e,U=e.name;var i=[],a="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;i.push("<"+a),e[t.attributesKey]&&i.push(qe(e[t.attributesKey],t,n));var o=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&e[t.attributesKey]["xml:space"]==="preserve";return o||("fullTagEmptyElementFn"in t?o=t.fullTagEmptyElementFn(e.name,e):o=t.fullTagEmptyElement),o?(i.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(i.push(Qn(e[t.elementsKey],t,n+1)),P=e,U=e.name),i.push(t.spaces&&os(e,t)?`
`+Array(n+1).join(t.spaces):""),i.push("</"+a+">")):i.push("/>"),i.join("")}function Qn(e,t,n,i){return e.reduce(function(a,o){var c=H(t,n,i&&!a);switch(o.type){case"element":return a+c+us(o,t,n);case"comment":return a+c+Wn(o[t.commentKey],t);case"doctype":return a+c+Xn(o[t.doctypeKey],t);case"cdata":return a+(t.indentCdata?c:"")+Hn(o[t.cdataKey],t);case"text":return a+(t.indentText?c:"")+pt(o[t.textKey],t);case"instruction":var h={};return h[o[t.nameKey]]=o[t.attributesKey]?o:o[t.instructionKey],a+(t.indentInstruction?c:"")+Yn(h,t,n)}},"")}function Jn(e,t,n){var i;for(i in e)if(e.hasOwnProperty(i))switch(i){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:return!0;default:return!0}return!1}function cs(e,t,n,i,a){P=e,U=t;var o="elementNameFn"in n?n.elementNameFn(t,e):t;if(typeof e>"u"||e===null||e==="")return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+o+"></"+o+">":"<"+o+"/>";var c=[];if(t){if(c.push("<"+o),typeof e!="object")return c.push(">"+pt(e,n)+"</"+o+">"),c.join("");e[n.attributesKey]&&c.push(qe(e[n.attributesKey],n,i));var h=Jn(e,n,!0)||e[n.attributesKey]&&e[n.attributesKey]["xml:space"]==="preserve";if(h||("fullTagEmptyElementFn"in n?h=n.fullTagEmptyElementFn(t,e):h=n.fullTagEmptyElement),h)c.push(">");else return c.push("/>"),c.join("")}return c.push(zn(e,n,i+1,!1)),P=e,U=t,t&&c.push((a?H(n,i,!1):"")+"</"+o+">"),c.join("")}function zn(e,t,n,i){var a,o,c,h=[];for(o in e)if(e.hasOwnProperty(o))for(c=ss(e[o])?e[o]:[e[o]],a=0;a<c.length;++a){switch(o){case t.declarationKey:h.push($n(c[a],t,n));break;case t.instructionKey:h.push((t.indentInstruction?H(t,n,i):"")+Yn(c[a],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:h.push((t.indentText?H(t,n,i):"")+pt(c[a],t));break;case t.cdataKey:h.push((t.indentCdata?H(t,n,i):"")+Hn(c[a],t));break;case t.doctypeKey:h.push(H(t,n,i)+Xn(c[a],t));break;case t.commentKey:h.push(H(t,n,i)+Wn(c[a],t));break;default:h.push(H(t,n,i)+cs(c[a],o,t,n,Jn(c[a],t)))}i=i&&!h.length}return h.join("")}Zn.exports=function(e,t){t=as(t);var n=[];return P=e,U="_root_",t.compact?n.push(zn(e,t,0,!0)):(e[t.declarationKey]&&n.push($n(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(Qn(e[t.elementsKey],t,0,!n.length))),n.join("")}});var tr=S((_a,er)=>{var ls=yt();er.exports=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if(typeof e=="string")try{n=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else n=e;return ls(n,t)}});var rr=S((va,nr)=>{var fs=gt(),ds=Gn(),hs=yt(),ms=tr();nr.exports={xml2js:fs,xml2json:ds,js2xml:hs,json2xml:ms}});var or=Z(require("fs")),Tt=Z(require("path")),_t=Z(ot());var Et=Z(require("fs")),ir=Z(rr());function _e(e){return(parseInt(e)||0)===0}function sr(e,t){function n(a){let o="";return a.elements.forEach(c=>{o+=" ",o+=c.name}),o}let i="";return e.forEach(a=>{if(console.log("about to parse",a),a.includes("report"))if(Et.default.existsSync(t))try{let o=Et.default.readFileSync(t+"/"+a,"utf8"),h=(0,ir.xml2js)(o,{ignoreComment:!0,alwaysChildren:!0});console.log("calculating test results, deciding if abbreviate output");let g=h.elements[0].elements[0],m=!0;if(_e(g.attributes.skipped)&&_e(g.attributes.skipped)&&_e(g.attributes.failures)&&_e(g.attributes.errors)){console.log("building abbreviated string for "+g.attributes.name);let p=""+g.attributes.name+" all passed:";for(let E=0;E<parseInt(g.attributes.tests);E++)p+=" :white_check_mark:";p+=`\r
`,i+=p}else{console.log("building long string for the failed test called: "+g.elements[0].attributes.name);let p="";p+=g.elements[0].attributes.name,p+=" has errors:",p+=`\r
`,g.elements.forEach(_=>{if(_.name==="testcase"){let N=_.attributes.name;if(N+=n(_),N.includes("skipped"))N=":fast_forward: "+N;else if(N.includes("failure")){let ie=_.elements[0].elements[0].text.split(/\r?\n/)[0];N=":x: "+N+" "+ie}else N=":white_check_mark: "+N;N="    "+N,N+=`\r
`,p+=N}}),i+=p+`\r
`}}catch(o){console.error("Error reading the file:",o)}else console.error("Folder does not exist:",t)}),i}async function ar(e,t,n,i){let a=parseInt(n)||0;console.log(`In the MessageBlock, there are ${a} items.`);try{let c=await(await fetch("https://slack.com/api/chat.postMessage",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({channel:t,text:i})})).json();return console.log("Message sent:",c),c.ts}catch(o){console.error("Error sending message:",o)}return"hello!"}console.log("Hello World! - about to start");async function gs(){try{let e=process.env.GITHUB_WORKSPACE;console.log(`Our checked out repo location is at: ${e} (only visible after actions/checkout) `);let t="",n=Tt.default.join(e,t);console.log(`the result folder is set as: ${n}`);let i=await or.default.promises.readdir(n);console.log("- Found files: ");let a=i.filter(o=>Tt.default.extname(o).toLowerCase()===".xml");if(a.length>0){let o=sr(a,n);console.log("at the end of it all, we have: ",o);let c=_t.default.getInput("slack-token")||null,h=_t.default.getInput("slack-channel-id")||null;if(c==null||h==null){console.log("Missing slack token or channel ID - please check your workflow file. and add them using with:");return}let g=ar(o,c,h,"hello from the action");console.log("slackSendResults timestamp: ",g)}else console.log("No XML files found to parse for testing - check your test-results-folder setting.")}catch(e){console.log("Had an error while attempting to open the folder: "+e)}console.log("Run() finished....")}gs();
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
//# sourceMappingURL=index.js.map
