"use strict";var Es=Object.create;var Va=Object.defineProperty;var ws=Object.getOwnPropertyDescriptor;var vs=Object.getOwnPropertyNames;var Rs=Object.getPrototypeOf,As=Object.prototype.hasOwnProperty;var ke=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports);var Cs=(r,n,o,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of vs(n))!As.call(r,c)&&c!==o&&Va(r,c,{get:()=>n[c],enumerable:!(s=ws(n,c))||s.enumerable});return r};var zt=(r,n,o)=>(o=r!=null?Es(Rs(r)):{},Cs(n||!r||!r.__esModule?Va(o,"default",{value:r,enumerable:!0}):o,r));var Ya=ke(Ir=>{(function(r){r.parser=function(l,i){return new o(l,i)},r.SAXParser=o,r.SAXStream=E,r.createStream=R,r.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function o(l,i){if(!(this instanceof o))return new o(l,i);var g=this;c(g),g.q=g.c="",g.bufferCheckPosition=r.MAX_BUFFER_LENGTH,g.opt=i||{},g.opt.lowercase=g.opt.lowercase||g.opt.lowercasetags,g.looseCase=g.opt.lowercase?"toLowerCase":"toUpperCase",g.tags=[],g.closed=g.closedRoot=g.sawRoot=!1,g.tag=g.error=null,g.strict=!!l,g.noscript=!!(l||g.opt.noscript),g.state=m.BEGIN,g.strictEntities=g.opt.strictEntities,g.ENTITIES=g.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),g.attribList=[],g.opt.xmlns&&(g.ns=Object.create(T)),g.trackPosition=g.opt.position!==!1,g.trackPosition&&(g.position=g.line=g.column=0),ne(g,"onready")}Object.create||(Object.create=function(l){function i(){}i.prototype=l;var g=new i;return g}),Object.keys||(Object.keys=function(l){var i=[];for(var g in l)l.hasOwnProperty(g)&&i.push(g);return i});function s(l){for(var i=Math.max(r.MAX_BUFFER_LENGTH,10),g=0,f=0,j=n.length;f<j;f++){var Q=l[n[f]].length;if(Q>i)switch(n[f]){case"textNode":Oe(l);break;case"cdata":G(l,"oncdata",l.cdata),l.cdata="";break;case"script":G(l,"onscript",l.script),l.script="";break;default:pe(l,"Max buffer length exceeded: "+n[f])}g=Math.max(g,Q)}var $=r.MAX_BUFFER_LENGTH-g;l.bufferCheckPosition=$+l.position}function c(l){for(var i=0,g=n.length;i<g;i++)l[n[i]]=""}function h(l){Oe(l),l.cdata!==""&&(G(l,"oncdata",l.cdata),l.cdata=""),l.script!==""&&(G(l,"onscript",l.script),l.script="")}o.prototype={end:function(){et(this)},write:tr,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){h(this)}};var p;try{p=require("stream").Stream}catch{p=function(){}}var y=r.EVENTS.filter(function(l){return l!=="error"&&l!=="end"});function R(l,i){return new E(l,i)}function E(l,i){if(!(this instanceof E))return new E(l,i);p.apply(this),this._parser=new o(l,i),this.writable=!0,this.readable=!0;var g=this;this._parser.onend=function(){g.emit("end")},this._parser.onerror=function(f){g.emit("error",f),g._parser.error=null},this._decoder=null,y.forEach(function(f){Object.defineProperty(g,"on"+f,{get:function(){return g._parser["on"+f]},set:function(j){if(!j)return g.removeAllListeners(f),g._parser["on"+f]=j,j;g.on(f,j)},enumerable:!0,configurable:!1})})}E.prototype=Object.create(p.prototype,{constructor:{value:E}}),E.prototype.write=function(l){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(l)){if(!this._decoder){var i=require("string_decoder").StringDecoder;this._decoder=new i("utf8")}l=this._decoder.write(l)}return this._parser.write(l.toString()),this.emit("data",l),!0},E.prototype.end=function(l){return l&&l.length&&this.write(l),this._parser.end(),!0},E.prototype.on=function(l,i){var g=this;return!g._parser["on"+l]&&y.indexOf(l)!==-1&&(g._parser["on"+l]=function(){var f=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);f.splice(0,0,l),g.emit.apply(g,f)}),p.prototype.on.call(g,l,i)};var I="[CDATA[",X="DOCTYPE",U="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",T={xml:U,xmlns:w},v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,J=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function W(l){return l===" "||l===`
`||l==="\r"||l==="	"}function q(l){return l==='"'||l==="'"}function H(l){return l===">"||W(l)}function K(l,i){return l.test(i)}function Fe(l,i){return!K(l,i)}var m=0;r.STATE={BEGIN:m++,BEGIN_WHITESPACE:m++,TEXT:m++,TEXT_ENTITY:m++,OPEN_WAKA:m++,SGML_DECL:m++,SGML_DECL_QUOTED:m++,DOCTYPE:m++,DOCTYPE_QUOTED:m++,DOCTYPE_DTD:m++,DOCTYPE_DTD_QUOTED:m++,COMMENT_STARTING:m++,COMMENT:m++,COMMENT_ENDING:m++,COMMENT_ENDED:m++,CDATA:m++,CDATA_ENDING:m++,CDATA_ENDING_2:m++,PROC_INST:m++,PROC_INST_BODY:m++,PROC_INST_ENDING:m++,OPEN_TAG:m++,OPEN_TAG_SLASH:m++,ATTRIB:m++,ATTRIB_NAME:m++,ATTRIB_NAME_SAW_WHITE:m++,ATTRIB_VALUE:m++,ATTRIB_VALUE_QUOTED:m++,ATTRIB_VALUE_CLOSED:m++,ATTRIB_VALUE_UNQUOTED:m++,ATTRIB_VALUE_ENTITY_Q:m++,ATTRIB_VALUE_ENTITY_U:m++,CLOSE_TAG:m++,CLOSE_TAG_SAW_WHITE:m++,SCRIPT:m++,SCRIPT_ENDING:m++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(l){var i=r.ENTITIES[l],g=typeof i=="number"?String.fromCharCode(i):i;r.ENTITIES[l]=g});for(var vt in r.STATE)r.STATE[r.STATE[vt]]=vt;m=r.STATE;function ne(l,i,g){l[i]&&l[i](g)}function G(l,i,g){l.textNode&&Oe(l),ne(l,i,g)}function Oe(l){l.textNode=de(l.opt,l.textNode),l.textNode&&ne(l,"ontext",l.textNode),l.textNode=""}function de(l,i){return l.trim&&(i=i.trim()),l.normalize&&(i=i.replace(/\s+/g," ")),i}function pe(l,i){return Oe(l),l.trackPosition&&(i+=`
Line: `+l.line+`
Column: `+l.column+`
Char: `+l.c),i=new Error(i),l.error=i,ne(l,"onerror",i),l}function et(l){return l.sawRoot&&!l.closedRoot&&z(l,"Unclosed root tag"),l.state!==m.BEGIN&&l.state!==m.BEGIN_WHITESPACE&&l.state!==m.TEXT&&pe(l,"Unexpected end"),Oe(l),l.c="",l.closed=!0,ne(l,"onend"),o.call(l,l.strict,l.opt),l}function z(l,i){if(typeof l!="object"||!(l instanceof o))throw new Error("bad call to strictFail");l.strict&&pe(l,i)}function Gr(l){l.strict||(l.tagName=l.tagName[l.looseCase]());var i=l.tags[l.tags.length-1]||l,g=l.tag={name:l.tagName,attributes:{}};l.opt.xmlns&&(g.ns=i.ns),l.attribList.length=0,G(l,"onopentagstart",g)}function Ve(l,i){var g=l.indexOf(":"),f=g<0?["",l]:l.split(":"),j=f[0],Q=f[1];return i&&l==="xmlns"&&(j="xmlns",Q=""),{prefix:j,local:Q}}function Rt(l){if(l.strict||(l.attribName=l.attribName[l.looseCase]()),l.attribList.indexOf(l.attribName)!==-1||l.tag.attributes.hasOwnProperty(l.attribName)){l.attribName=l.attribValue="";return}if(l.opt.xmlns){var i=Ve(l.attribName,!0),g=i.prefix,f=i.local;if(g==="xmlns")if(f==="xml"&&l.attribValue!==U)z(l,"xml: prefix must be bound to "+U+`
Actual: `+l.attribValue);else if(f==="xmlns"&&l.attribValue!==w)z(l,"xmlns: prefix must be bound to "+w+`
Actual: `+l.attribValue);else{var j=l.tag,Q=l.tags[l.tags.length-1]||l;j.ns===Q.ns&&(j.ns=Object.create(Q.ns)),j.ns[f]=l.attribValue}l.attribList.push([l.attribName,l.attribValue])}else l.tag.attributes[l.attribName]=l.attribValue,G(l,"onattribute",{name:l.attribName,value:l.attribValue});l.attribName=l.attribValue=""}function ve(l,i){if(l.opt.xmlns){var g=l.tag,f=Ve(l.tagName);g.prefix=f.prefix,g.local=f.local,g.uri=g.ns[f.prefix]||"",g.prefix&&!g.uri&&(z(l,"Unbound namespace prefix: "+JSON.stringify(l.tagName)),g.uri=f.prefix);var j=l.tags[l.tags.length-1]||l;g.ns&&j.ns!==g.ns&&Object.keys(g.ns).forEach(function(ot){G(l,"onopennamespace",{prefix:ot,uri:g.ns[ot]})});for(var Q=0,$=l.attribList.length;Q<$;Q++){var te=l.attribList[Q],le=te[0],De=te[1],ee=Ve(le,!0),he=ee.prefix,At=ee.local,Ne=he===""?"":g.ns[he]||"",at={name:le,value:De,prefix:he,local:At,uri:Ne};he&&he!=="xmlns"&&!Ne&&(z(l,"Unbound namespace prefix: "+JSON.stringify(he)),at.uri=he),l.tag.attributes[le]=at,G(l,"onattribute",at)}l.attribList.length=0}l.tag.isSelfClosing=!!i,l.sawRoot=!0,l.tags.push(l.tag),G(l,"onopentag",l.tag),i||(!l.noscript&&l.tagName.toLowerCase()==="script"?l.state=m.SCRIPT:l.state=m.TEXT,l.tag=null,l.tagName=""),l.attribName=l.attribValue="",l.attribList.length=0}function tt(l){if(!l.tagName){z(l,"Weird empty close tag."),l.textNode+="</>",l.state=m.TEXT;return}if(l.script){if(l.tagName!=="script"){l.script+="</"+l.tagName+">",l.tagName="",l.state=m.SCRIPT;return}G(l,"onscript",l.script),l.script=""}var i=l.tags.length,g=l.tagName;l.strict||(g=g[l.looseCase]());for(var f=g;i--;){var j=l.tags[i];if(j.name!==f)z(l,"Unexpected close tag");else break}if(i<0){z(l,"Unmatched closing tag: "+l.tagName),l.textNode+="</"+l.tagName+">",l.state=m.TEXT;return}l.tagName=g;for(var Q=l.tags.length;Q-- >i;){var $=l.tag=l.tags.pop();l.tagName=l.tag.name,G(l,"onclosetag",l.tagName);var te={};for(var le in $.ns)te[le]=$.ns[le];var De=l.tags[l.tags.length-1]||l;l.opt.xmlns&&$.ns!==De.ns&&Object.keys($.ns).forEach(function(ee){var he=$.ns[ee];G(l,"onclosenamespace",{prefix:ee,uri:he})})}i===0&&(l.closedRoot=!0),l.tagName=l.attribValue=l.attribName="",l.attribList.length=0,l.state=m.TEXT}function er(l){var i=l.entity,g=i.toLowerCase(),f,j="";return l.ENTITIES[i]?l.ENTITIES[i]:l.ENTITIES[g]?l.ENTITIES[g]:(i=g,i.charAt(0)==="#"&&(i.charAt(1)==="x"?(i=i.slice(2),f=parseInt(i,16),j=f.toString(16)):(i=i.slice(1),f=parseInt(i,10),j=f.toString(10))),i=i.replace(/^0+/,""),isNaN(f)||j.toLowerCase()!==i?(z(l,"Invalid character entity"),"&"+l.entity+";"):String.fromCodePoint(f))}function rt(l,i){i==="<"?(l.state=m.OPEN_WAKA,l.startTagPosition=l.position):W(i)||(z(l,"Non-whitespace before first tag."),l.textNode=i,l.state=m.TEXT)}function nt(l,i){var g="";return i<l.length&&(g=l.charAt(i)),g}function tr(l){var i=this;if(this.error)throw this.error;if(i.closed)return pe(i,"Cannot write after close. Assign an onready handler.");if(l===null)return et(i);typeof l=="object"&&(l=l.toString());for(var g=0,f="";f=nt(l,g++),i.c=f,!!f;)switch(i.trackPosition&&(i.position++,f===`
`?(i.line++,i.column=0):i.column++),i.state){case m.BEGIN:if(i.state=m.BEGIN_WHITESPACE,f==="\uFEFF")continue;rt(i,f);continue;case m.BEGIN_WHITESPACE:rt(i,f);continue;case m.TEXT:if(i.sawRoot&&!i.closedRoot){for(var j=g-1;f&&f!=="<"&&f!=="&";)f=nt(l,g++),f&&i.trackPosition&&(i.position++,f===`
`?(i.line++,i.column=0):i.column++);i.textNode+=l.substring(j,g-1)}f==="<"&&!(i.sawRoot&&i.closedRoot&&!i.strict)?(i.state=m.OPEN_WAKA,i.startTagPosition=i.position):(!W(f)&&(!i.sawRoot||i.closedRoot)&&z(i,"Text data outside of root node."),f==="&"?i.state=m.TEXT_ENTITY:i.textNode+=f);continue;case m.SCRIPT:f==="<"?i.state=m.SCRIPT_ENDING:i.script+=f;continue;case m.SCRIPT_ENDING:f==="/"?i.state=m.CLOSE_TAG:(i.script+="<"+f,i.state=m.SCRIPT);continue;case m.OPEN_WAKA:if(f==="!")i.state=m.SGML_DECL,i.sgmlDecl="";else if(!W(f))if(K(v,f))i.state=m.OPEN_TAG,i.tagName=f;else if(f==="/")i.state=m.CLOSE_TAG,i.tagName="";else if(f==="?")i.state=m.PROC_INST,i.procInstName=i.procInstBody="";else{if(z(i,"Unencoded <"),i.startTagPosition+1<i.position){var Q=i.position-i.startTagPosition;f=new Array(Q).join(" ")+f}i.textNode+="<"+f,i.state=m.TEXT}continue;case m.SGML_DECL:(i.sgmlDecl+f).toUpperCase()===I?(G(i,"onopencdata"),i.state=m.CDATA,i.sgmlDecl="",i.cdata=""):i.sgmlDecl+f==="--"?(i.state=m.COMMENT,i.comment="",i.sgmlDecl=""):(i.sgmlDecl+f).toUpperCase()===X?(i.state=m.DOCTYPE,(i.doctype||i.sawRoot)&&z(i,"Inappropriately located doctype declaration"),i.doctype="",i.sgmlDecl=""):f===">"?(G(i,"onsgmldeclaration",i.sgmlDecl),i.sgmlDecl="",i.state=m.TEXT):(q(f)&&(i.state=m.SGML_DECL_QUOTED),i.sgmlDecl+=f);continue;case m.SGML_DECL_QUOTED:f===i.q&&(i.state=m.SGML_DECL,i.q=""),i.sgmlDecl+=f;continue;case m.DOCTYPE:f===">"?(i.state=m.TEXT,G(i,"ondoctype",i.doctype),i.doctype=!0):(i.doctype+=f,f==="["?i.state=m.DOCTYPE_DTD:q(f)&&(i.state=m.DOCTYPE_QUOTED,i.q=f));continue;case m.DOCTYPE_QUOTED:i.doctype+=f,f===i.q&&(i.q="",i.state=m.DOCTYPE);continue;case m.DOCTYPE_DTD:i.doctype+=f,f==="]"?i.state=m.DOCTYPE:q(f)&&(i.state=m.DOCTYPE_DTD_QUOTED,i.q=f);continue;case m.DOCTYPE_DTD_QUOTED:i.doctype+=f,f===i.q&&(i.state=m.DOCTYPE_DTD,i.q="");continue;case m.COMMENT:f==="-"?i.state=m.COMMENT_ENDING:i.comment+=f;continue;case m.COMMENT_ENDING:f==="-"?(i.state=m.COMMENT_ENDED,i.comment=de(i.opt,i.comment),i.comment&&G(i,"oncomment",i.comment),i.comment=""):(i.comment+="-"+f,i.state=m.COMMENT);continue;case m.COMMENT_ENDED:f!==">"?(z(i,"Malformed comment"),i.comment+="--"+f,i.state=m.COMMENT):i.state=m.TEXT;continue;case m.CDATA:f==="]"?i.state=m.CDATA_ENDING:i.cdata+=f;continue;case m.CDATA_ENDING:f==="]"?i.state=m.CDATA_ENDING_2:(i.cdata+="]"+f,i.state=m.CDATA);continue;case m.CDATA_ENDING_2:f===">"?(i.cdata&&G(i,"oncdata",i.cdata),G(i,"onclosecdata"),i.cdata="",i.state=m.TEXT):f==="]"?i.cdata+="]":(i.cdata+="]]"+f,i.state=m.CDATA);continue;case m.PROC_INST:f==="?"?i.state=m.PROC_INST_ENDING:W(f)?i.state=m.PROC_INST_BODY:i.procInstName+=f;continue;case m.PROC_INST_BODY:if(!i.procInstBody&&W(f))continue;f==="?"?i.state=m.PROC_INST_ENDING:i.procInstBody+=f;continue;case m.PROC_INST_ENDING:f===">"?(G(i,"onprocessinginstruction",{name:i.procInstName,body:i.procInstBody}),i.procInstName=i.procInstBody="",i.state=m.TEXT):(i.procInstBody+="?"+f,i.state=m.PROC_INST_BODY);continue;case m.OPEN_TAG:K(N,f)?i.tagName+=f:(Gr(i),f===">"?ve(i):f==="/"?i.state=m.OPEN_TAG_SLASH:(W(f)||z(i,"Invalid character in tag name"),i.state=m.ATTRIB));continue;case m.OPEN_TAG_SLASH:f===">"?(ve(i,!0),tt(i)):(z(i,"Forward-slash in opening tag not followed by >"),i.state=m.ATTRIB);continue;case m.ATTRIB:if(W(f))continue;f===">"?ve(i):f==="/"?i.state=m.OPEN_TAG_SLASH:K(v,f)?(i.attribName=f,i.attribValue="",i.state=m.ATTRIB_NAME):z(i,"Invalid attribute name");continue;case m.ATTRIB_NAME:f==="="?i.state=m.ATTRIB_VALUE:f===">"?(z(i,"Attribute without value"),i.attribValue=i.attribName,Rt(i),ve(i)):W(f)?i.state=m.ATTRIB_NAME_SAW_WHITE:K(N,f)?i.attribName+=f:z(i,"Invalid attribute name");continue;case m.ATTRIB_NAME_SAW_WHITE:if(f==="=")i.state=m.ATTRIB_VALUE;else{if(W(f))continue;z(i,"Attribute without value"),i.tag.attributes[i.attribName]="",i.attribValue="",G(i,"onattribute",{name:i.attribName,value:""}),i.attribName="",f===">"?ve(i):K(v,f)?(i.attribName=f,i.state=m.ATTRIB_NAME):(z(i,"Invalid attribute name"),i.state=m.ATTRIB)}continue;case m.ATTRIB_VALUE:if(W(f))continue;q(f)?(i.q=f,i.state=m.ATTRIB_VALUE_QUOTED):(z(i,"Unquoted attribute value"),i.state=m.ATTRIB_VALUE_UNQUOTED,i.attribValue=f);continue;case m.ATTRIB_VALUE_QUOTED:if(f!==i.q){f==="&"?i.state=m.ATTRIB_VALUE_ENTITY_Q:i.attribValue+=f;continue}Rt(i),i.q="",i.state=m.ATTRIB_VALUE_CLOSED;continue;case m.ATTRIB_VALUE_CLOSED:W(f)?i.state=m.ATTRIB:f===">"?ve(i):f==="/"?i.state=m.OPEN_TAG_SLASH:K(v,f)?(z(i,"No whitespace between attributes"),i.attribName=f,i.attribValue="",i.state=m.ATTRIB_NAME):z(i,"Invalid attribute name");continue;case m.ATTRIB_VALUE_UNQUOTED:if(!H(f)){f==="&"?i.state=m.ATTRIB_VALUE_ENTITY_U:i.attribValue+=f;continue}Rt(i),f===">"?ve(i):i.state=m.ATTRIB;continue;case m.CLOSE_TAG:if(i.tagName)f===">"?tt(i):K(N,f)?i.tagName+=f:i.script?(i.script+="</"+i.tagName,i.tagName="",i.state=m.SCRIPT):(W(f)||z(i,"Invalid tagname in closing tag"),i.state=m.CLOSE_TAG_SAW_WHITE);else{if(W(f))continue;Fe(v,f)?i.script?(i.script+="</"+f,i.state=m.SCRIPT):z(i,"Invalid tagname in closing tag."):i.tagName=f}continue;case m.CLOSE_TAG_SAW_WHITE:if(W(f))continue;f===">"?tt(i):z(i,"Invalid characters in closing tag");continue;case m.TEXT_ENTITY:case m.ATTRIB_VALUE_ENTITY_Q:case m.ATTRIB_VALUE_ENTITY_U:var $,te;switch(i.state){case m.TEXT_ENTITY:$=m.TEXT,te="textNode";break;case m.ATTRIB_VALUE_ENTITY_Q:$=m.ATTRIB_VALUE_QUOTED,te="attribValue";break;case m.ATTRIB_VALUE_ENTITY_U:$=m.ATTRIB_VALUE_UNQUOTED,te="attribValue";break}f===";"?(i[te]+=er(i),i.entity="",i.state=$):K(i.entity.length?J:P,f)?i.entity+=f:(z(i,"Invalid character in entity name"),i[te]+="&"+i.entity+f,i.entity="",i.state=$);continue;default:throw new Error(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&s(i),i}String.fromCodePoint||function(){var l=String.fromCharCode,i=Math.floor,g=function(){var f=16384,j=[],Q,$,te=-1,le=arguments.length;if(!le)return"";for(var De="";++te<le;){var ee=Number(arguments[te]);if(!isFinite(ee)||ee<0||ee>1114111||i(ee)!==ee)throw RangeError("Invalid code point: "+ee);ee<=65535?j.push(ee):(ee-=65536,Q=(ee>>10)+55296,$=ee%1024+56320,j.push(Q,$)),(te+1===le||j.length>f)&&(De+=l.apply(null,j),j.length=0)}return De};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:g,configurable:!0,writable:!0}):String.fromCodePoint=g}()})(typeof Ir>"u"?Ir.sax={}:Ir)});var kr=ke((ql,Ga)=>{Ga.exports={isArray:function(r){return Array.isArray?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}}});var Lr=ke((Wl,Qa)=>{var Ps=kr().isArray;Qa.exports={copyOptions:function(r){var n,o={};for(n in r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o},ensureFlagExists:function(r,n){(!(r in n)||typeof n[r]!="boolean")&&(n[r]=!1)},ensureSpacesExists:function(r){(!("spaces"in r)||typeof r.spaces!="number"&&typeof r.spaces!="string")&&(r.spaces=0)},ensureAlwaysArrayExists:function(r){(!("alwaysArray"in r)||typeof r.alwaysArray!="boolean"&&!Ps(r.alwaysArray))&&(r.alwaysArray=!1)},ensureKeyExists:function(r,n){(!(r+"Key"in n)||typeof n[r+"Key"]!="string")&&(n[r+"Key"]=n.compact?"_"+r:r)},checkFnExists:function(r,n){return r+"Fn"in n}}});var Tn=ke((xl,ao)=>{var Fs=Ya(),Os={on:function(){},parse:function(){}},D=Lr(),yt=kr().isArray,b,Sn=!0,F;function Ds(r){return b=D.copyOptions(r),D.ensureFlagExists("ignoreDeclaration",b),D.ensureFlagExists("ignoreInstruction",b),D.ensureFlagExists("ignoreAttributes",b),D.ensureFlagExists("ignoreText",b),D.ensureFlagExists("ignoreComment",b),D.ensureFlagExists("ignoreCdata",b),D.ensureFlagExists("ignoreDoctype",b),D.ensureFlagExists("compact",b),D.ensureFlagExists("alwaysChildren",b),D.ensureFlagExists("addParent",b),D.ensureFlagExists("trim",b),D.ensureFlagExists("nativeType",b),D.ensureFlagExists("nativeTypeAttributes",b),D.ensureFlagExists("sanitize",b),D.ensureFlagExists("instructionHasAttributes",b),D.ensureFlagExists("captureSpacesBetweenElements",b),D.ensureAlwaysArrayExists(b),D.ensureKeyExists("declaration",b),D.ensureKeyExists("instruction",b),D.ensureKeyExists("attributes",b),D.ensureKeyExists("text",b),D.ensureKeyExists("comment",b),D.ensureKeyExists("cdata",b),D.ensureKeyExists("doctype",b),D.ensureKeyExists("type",b),D.ensureKeyExists("name",b),D.ensureKeyExists("elements",b),D.ensureKeyExists("parent",b),D.checkFnExists("doctype",b),D.checkFnExists("instruction",b),D.checkFnExists("cdata",b),D.checkFnExists("comment",b),D.checkFnExists("text",b),D.checkFnExists("instructionName",b),D.checkFnExists("elementName",b),D.checkFnExists("attributeName",b),D.checkFnExists("attributeValue",b),D.checkFnExists("attributes",b),b}function ro(r){var n=Number(r);if(!isNaN(n))return n;var o=r.toLowerCase();return o==="true"?!0:o==="false"?!1:r}function jt(r,n){var o;if(b.compact){if(!F[b[r+"Key"]]&&(yt(b.alwaysArray)?b.alwaysArray.indexOf(b[r+"Key"])!==-1:b.alwaysArray)&&(F[b[r+"Key"]]=[]),F[b[r+"Key"]]&&!yt(F[b[r+"Key"]])&&(F[b[r+"Key"]]=[F[b[r+"Key"]]]),r+"Fn"in b&&typeof n=="string"&&(n=b[r+"Fn"](n,F)),r==="instruction"&&("instructionFn"in b||"instructionNameFn"in b)){for(o in n)if(n.hasOwnProperty(o))if("instructionFn"in b)n[o]=b.instructionFn(n[o],o,F);else{var s=n[o];delete n[o],n[b.instructionNameFn(o,s,F)]=s}}yt(F[b[r+"Key"]])?F[b[r+"Key"]].push(n):F[b[r+"Key"]]=n}else{F[b.elementsKey]||(F[b.elementsKey]=[]);var c={};if(c[b.typeKey]=r,r==="instruction"){for(o in n)if(n.hasOwnProperty(o))break;c[b.nameKey]="instructionNameFn"in b?b.instructionNameFn(o,n,F):o,b.instructionHasAttributes?(c[b.attributesKey]=n[o][b.attributesKey],"instructionFn"in b&&(c[b.attributesKey]=b.instructionFn(c[b.attributesKey],o,F))):("instructionFn"in b&&(n[o]=b.instructionFn(n[o],o,F)),c[b.instructionKey]=n[o])}else r+"Fn"in b&&(n=b[r+"Fn"](n,F)),c[b[r+"Key"]]=n;b.addParent&&(c[b.parentKey]=F),F[b.elementsKey].push(c)}}function no(r){if("attributesFn"in b&&r&&(r=b.attributesFn(r,F)),(b.trim||"attributeValueFn"in b||"attributeNameFn"in b||b.nativeTypeAttributes)&&r){var n;for(n in r)if(r.hasOwnProperty(n)&&(b.trim&&(r[n]=r[n].trim()),b.nativeTypeAttributes&&(r[n]=ro(r[n])),"attributeValueFn"in b&&(r[n]=b.attributeValueFn(r[n],n,F)),"attributeNameFn"in b)){var o=r[n];delete r[n],r[b.attributeNameFn(n,r[n],F)]=o}}return r}function Ns(r){var n={};if(r.body&&(r.name.toLowerCase()==="xml"||b.instructionHasAttributes)){for(var o=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,s;(s=o.exec(r.body))!==null;)n[s[1]]=s[2]||s[3]||s[4];n=no(n)}if(r.name.toLowerCase()==="xml"){if(b.ignoreDeclaration)return;F[b.declarationKey]={},Object.keys(n).length&&(F[b.declarationKey][b.attributesKey]=n),b.addParent&&(F[b.declarationKey][b.parentKey]=F)}else{if(b.ignoreInstruction)return;b.trim&&(r.body=r.body.trim());var c={};b.instructionHasAttributes&&Object.keys(n).length?(c[r.name]={},c[r.name][b.attributesKey]=n):c[r.name]=r.body,jt("instruction",c)}}function Xa(r,n){var o;if(typeof r=="object"&&(n=r.attributes,r=r.name),n=no(n),"elementNameFn"in b&&(r=b.elementNameFn(r,F)),b.compact){if(o={},!b.ignoreAttributes&&n&&Object.keys(n).length){o[b.attributesKey]={};var s;for(s in n)n.hasOwnProperty(s)&&(o[b.attributesKey][s]=n[s])}!(r in F)&&(yt(b.alwaysArray)?b.alwaysArray.indexOf(r)!==-1:b.alwaysArray)&&(F[r]=[]),F[r]&&!yt(F[r])&&(F[r]=[F[r]]),yt(F[r])?F[r].push(o):F[r]=o}else F[b.elementsKey]||(F[b.elementsKey]=[]),o={},o[b.typeKey]="element",o[b.nameKey]=r,!b.ignoreAttributes&&n&&Object.keys(n).length&&(o[b.attributesKey]=n),b.alwaysChildren&&(o[b.elementsKey]=[]),F[b.elementsKey].push(o);o[b.parentKey]=F,F=o}function Za(r){b.ignoreText||!r.trim()&&!b.captureSpacesBetweenElements||(b.trim&&(r=r.trim()),b.nativeType&&(r=ro(r)),b.sanitize&&(r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),jt("text",r))}function Ja(r){b.ignoreComment||(b.trim&&(r=r.trim()),jt("comment",r))}function eo(r){var n=F[b.parentKey];b.addParent||delete F[b.parentKey],F=n}function Bs(r){b.ignoreCdata||(b.trim&&(r=r.trim()),jt("cdata",r))}function Is(r){b.ignoreDoctype||(r=r.replace(/^ /,""),b.trim&&(r=r.trim()),jt("doctype",r))}function to(r){r.note=r}ao.exports=function(r,n){var o=Sn?Fs.parser(!0,{}):o=new Os.Parser("UTF-8"),s={};if(F=s,b=Ds(n),Sn?(o.opt={strictEntities:!0},o.onopentag=Xa,o.ontext=Za,o.oncomment=Ja,o.onclosetag=eo,o.onerror=to,o.oncdata=Bs,o.ondoctype=Is,o.onprocessinginstruction=Ns):(o.on("startElement",Xa),o.on("text",Za),o.on("comment",Ja),o.on("endElement",eo),o.on("error",to)),Sn)o.write(r).close();else if(!o.parse(r))throw new Error("XML parsing error: "+o.getError());if(s[b.elementsKey]){var c=s[b.elementsKey];delete s[b.elementsKey],s[b.elementsKey]=c,delete s.text}return s}});var so=ke((Ml,io)=>{var oo=Lr(),ks=Tn();function Ls(r){var n=oo.copyOptions(r);return oo.ensureSpacesExists(n),n}io.exports=function(r,n){var o,s,c,h;return o=Ls(n),s=ks(r,o),h="compact"in o&&o.compact?"_parent":"parent","addParent"in o&&o.addParent?c=JSON.stringify(s,function(p,y){return p===h?"_":y},o.spaces):c=JSON.stringify(s,null,o.spaces),c.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}});var wn=ke((Ul,po)=>{var B=Lr(),qs=kr().isArray,oe,ie;function Ws(r){var n=B.copyOptions(r);return B.ensureFlagExists("ignoreDeclaration",n),B.ensureFlagExists("ignoreInstruction",n),B.ensureFlagExists("ignoreAttributes",n),B.ensureFlagExists("ignoreText",n),B.ensureFlagExists("ignoreComment",n),B.ensureFlagExists("ignoreCdata",n),B.ensureFlagExists("ignoreDoctype",n),B.ensureFlagExists("compact",n),B.ensureFlagExists("indentText",n),B.ensureFlagExists("indentCdata",n),B.ensureFlagExists("indentAttributes",n),B.ensureFlagExists("indentInstruction",n),B.ensureFlagExists("fullTagEmptyElement",n),B.ensureFlagExists("noQuotesForNativeAttributes",n),B.ensureSpacesExists(n),typeof n.spaces=="number"&&(n.spaces=Array(n.spaces+1).join(" ")),B.ensureKeyExists("declaration",n),B.ensureKeyExists("instruction",n),B.ensureKeyExists("attributes",n),B.ensureKeyExists("text",n),B.ensureKeyExists("comment",n),B.ensureKeyExists("cdata",n),B.ensureKeyExists("doctype",n),B.ensureKeyExists("type",n),B.ensureKeyExists("name",n),B.ensureKeyExists("elements",n),B.checkFnExists("doctype",n),B.checkFnExists("instruction",n),B.checkFnExists("cdata",n),B.checkFnExists("comment",n),B.checkFnExists("text",n),B.checkFnExists("instructionName",n),B.checkFnExists("elementName",n),B.checkFnExists("attributeName",n),B.checkFnExists("attributeValue",n),B.checkFnExists("attributes",n),B.checkFnExists("fullTagEmptyElement",n),n}function Ae(r,n,o){return(!o&&r.spaces?`
`:"")+Array(n+1).join(r.spaces)}function qr(r,n,o){if(n.ignoreAttributes)return"";"attributesFn"in n&&(r=n.attributesFn(r,ie,oe));var s,c,h,p,y=[];for(s in r)r.hasOwnProperty(s)&&r[s]!==null&&r[s]!==void 0&&(p=n.noQuotesForNativeAttributes&&typeof r[s]!="string"?"":'"',c=""+r[s],c=c.replace(/"/g,"&quot;"),h="attributeNameFn"in n?n.attributeNameFn(s,c,ie,oe):s,y.push(n.spaces&&n.indentAttributes?Ae(n,o+1,!1):" "),y.push(h+"="+p+("attributeValueFn"in n?n.attributeValueFn(c,s,ie,oe):c)+p));return r&&Object.keys(r).length&&n.spaces&&n.indentAttributes&&y.push(Ae(n,o,!1)),y.join("")}function lo(r,n,o){return oe=r,ie="xml",n.ignoreDeclaration?"":"<?xml"+qr(r[n.attributesKey],n,o)+"?>"}function uo(r,n,o){if(n.ignoreInstruction)return"";var s;for(s in r)if(r.hasOwnProperty(s))break;var c="instructionNameFn"in n?n.instructionNameFn(s,r[s],ie,oe):s;if(typeof r[s]=="object")return oe=r,ie=c,"<?"+c+qr(r[s][n.attributesKey],n,o)+"?>";var h=r[s]?r[s]:"";return"instructionFn"in n&&(h=n.instructionFn(h,s,ie,oe)),"<?"+c+(h?" "+h:"")+"?>"}function co(r,n){return n.ignoreComment?"":"<!--"+("commentFn"in n?n.commentFn(r,ie,oe):r)+"-->"}function fo(r,n){return n.ignoreCdata?"":"<![CDATA["+("cdataFn"in n?n.cdataFn(r,ie,oe):r.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function ho(r,n){return n.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in n?n.doctypeFn(r,ie,oe):r)+">"}function En(r,n){return n.ignoreText?"":(r=""+r,r=r.replace(/&amp;/g,"&"),r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in n?n.textFn(r,ie,oe):r)}function xs(r,n){var o;if(r.elements&&r.elements.length)for(o=0;o<r.elements.length;++o)switch(r.elements[o][n.typeKey]){case"text":if(n.indentText)return!0;break;case"cdata":if(n.indentCdata)return!0;break;case"instruction":if(n.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function Ms(r,n,o){oe=r,ie=r.name;var s=[],c="elementNameFn"in n?n.elementNameFn(r.name,r):r.name;s.push("<"+c),r[n.attributesKey]&&s.push(qr(r[n.attributesKey],n,o));var h=r[n.elementsKey]&&r[n.elementsKey].length||r[n.attributesKey]&&r[n.attributesKey]["xml:space"]==="preserve";return h||("fullTagEmptyElementFn"in n?h=n.fullTagEmptyElementFn(r.name,r):h=n.fullTagEmptyElement),h?(s.push(">"),r[n.elementsKey]&&r[n.elementsKey].length&&(s.push(mo(r[n.elementsKey],n,o+1)),oe=r,ie=r.name),s.push(n.spaces&&xs(r,n)?`
`+Array(o+1).join(n.spaces):""),s.push("</"+c+">")):s.push("/>"),s.join("")}function mo(r,n,o,s){return r.reduce(function(c,h){var p=Ae(n,o,s&&!c);switch(h.type){case"element":return c+p+Ms(h,n,o);case"comment":return c+p+co(h[n.commentKey],n);case"doctype":return c+p+ho(h[n.doctypeKey],n);case"cdata":return c+(n.indentCdata?p:"")+fo(h[n.cdataKey],n);case"text":return c+(n.indentText?p:"")+En(h[n.textKey],n);case"instruction":var y={};return y[h[n.nameKey]]=h[n.attributesKey]?h:h[n.instructionKey],c+(n.indentInstruction?p:"")+uo(y,n,o)}},"")}function bo(r,n,o){var s;for(s in r)if(r.hasOwnProperty(s))switch(s){case n.parentKey:case n.attributesKey:break;case n.textKey:if(n.indentText||o)return!0;break;case n.cdataKey:if(n.indentCdata||o)return!0;break;case n.instructionKey:if(n.indentInstruction||o)return!0;break;case n.doctypeKey:case n.commentKey:return!0;default:return!0}return!1}function Us(r,n,o,s,c){oe=r,ie=n;var h="elementNameFn"in o?o.elementNameFn(n,r):n;if(typeof r>"u"||r===null||r==="")return"fullTagEmptyElementFn"in o&&o.fullTagEmptyElementFn(n,r)||o.fullTagEmptyElement?"<"+h+"></"+h+">":"<"+h+"/>";var p=[];if(n){if(p.push("<"+h),typeof r!="object")return p.push(">"+En(r,o)+"</"+h+">"),p.join("");r[o.attributesKey]&&p.push(qr(r[o.attributesKey],o,s));var y=bo(r,o,!0)||r[o.attributesKey]&&r[o.attributesKey]["xml:space"]==="preserve";if(y||("fullTagEmptyElementFn"in o?y=o.fullTagEmptyElementFn(n,r):y=o.fullTagEmptyElement),y)p.push(">");else return p.push("/>"),p.join("")}return p.push(yo(r,o,s+1,!1)),oe=r,ie=n,n&&p.push((c?Ae(o,s,!1):"")+"</"+h+">"),p.join("")}function yo(r,n,o,s){var c,h,p,y=[];for(h in r)if(r.hasOwnProperty(h))for(p=qs(r[h])?r[h]:[r[h]],c=0;c<p.length;++c){switch(h){case n.declarationKey:y.push(lo(p[c],n,o));break;case n.instructionKey:y.push((n.indentInstruction?Ae(n,o,s):"")+uo(p[c],n,o));break;case n.attributesKey:case n.parentKey:break;case n.textKey:y.push((n.indentText?Ae(n,o,s):"")+En(p[c],n));break;case n.cdataKey:y.push((n.indentCdata?Ae(n,o,s):"")+fo(p[c],n));break;case n.doctypeKey:y.push(Ae(n,o,s)+ho(p[c],n));break;case n.commentKey:y.push(Ae(n,o,s)+co(p[c],n));break;default:y.push(Ae(n,o,s)+Us(p[c],h,n,o,bo(p[c],n)))}s=s&&!y.length}return y.join("")}po.exports=function(r,n){n=Ws(n);var o=[];return oe=r,ie="_root_",n.compact?o.push(yo(r,n,0,!0)):(r[n.declarationKey]&&o.push(lo(r[n.declarationKey],n,0)),r[n.elementsKey]&&r[n.elementsKey].length&&o.push(mo(r[n.elementsKey],n,0,!o.length))),o.join("")}});var _o=ke((zl,go)=>{var zs=wn();go.exports=function(r,n){r instanceof Buffer&&(r=r.toString());var o=null;if(typeof r=="string")try{o=JSON.parse(r)}catch{throw new Error("The JSON structure is invalid")}else o=r;return zs(o,n)}});var To=ke((jl,So)=>{var js=Tn(),Ks=so(),$s=wn(),Hs=_o();So.exports={xml2js:js,xml2json:Ks,js2xml:$s,json2xml:Hs}});var ei=ke(Jo=>{var Vs=Object.create,Hr=Object.defineProperty,Ys=Object.getOwnPropertyDescriptor,Gs=Object.getOwnPropertyNames,Qs=Object.getPrototypeOf,Xs=Object.prototype.hasOwnProperty,Wo=r=>Hr(r,"__esModule",{value:!0}),Xt=(r,n)=>function(){return r&&(n=(0,r[Object.keys(r)[0]])(r=0)),n},qn=(r,n)=>function(){return n||(0,r[Object.keys(r)[0]])((n={exports:{}}).exports,n),n.exports},xo=(r,n)=>{Wo(r);for(var o in n)Hr(r,o,{get:n[o],enumerable:!0})},Zs=(r,n,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of Gs(n))!Xs.call(r,s)&&s!=="default"&&Hr(r,s,{get:()=>n[s],enumerable:!(o=Ys(n,s))||o.enumerable});return r},ae=r=>Zs(Wo(Hr(r!=null?Vs(Qs(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),Js=qn({"node_modules/web-streams-polyfill/dist/ponyfill.es2018.js"(r,n){(function(o,s){typeof r=="object"&&typeof n<"u"?s(r):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.WebStreamsPolyfill={}))})(r,function(o){"use strict";let s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function c(){}function h(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let p=h();function y(e){return typeof e=="object"&&e!==null||typeof e=="function"}let R=c,E=Promise,I=Promise.prototype.then,X=Promise.resolve.bind(E),U=Promise.reject.bind(E);function w(e){return new E(e)}function T(e){return X(e)}function v(e){return U(e)}function N(e,t,a){return I.call(e,t,a)}function P(e,t,a){N(N(e,t,a),void 0,R)}function J(e,t){P(e,t)}function W(e,t){P(e,void 0,t)}function q(e,t,a){return N(e,t,a)}function H(e){N(e,void 0,R)}let K=(()=>{let e=p&&p.queueMicrotask;if(typeof e=="function")return e;let t=T(void 0);return a=>N(t,a)})();function Fe(e,t,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,a)}function m(e,t,a){try{return T(Fe(e,t,a))}catch(u){return v(u)}}let vt=16384;class ne{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let a=this._back,u=a;a._elements.length===vt-1&&(u={_elements:[],_next:void 0}),a._elements.push(t),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let t=this._front,a=t,u=this._cursor,d=u+1,_=t._elements,S=_[u];return d===vt&&(a=t._next,d=0),--this._size,this._cursor=d,t!==a&&(this._front=a),_[u]=void 0,S}forEach(t){let a=this._cursor,u=this._front,d=u._elements;for(;(a!==d.length||u._next!==void 0)&&!(a===d.length&&(u=u._next,d=u._elements,a=0,d.length===0));)t(d[a]),++a}peek(){let t=this._front,a=this._cursor;return t._elements[a]}}function G(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?et(e):t._state==="closed"?Gr(e):z(e,t._storedError)}function Oe(e,t){let a=e._ownerReadableStream;return _e(a,t)}function de(e){e._ownerReadableStream._state==="readable"?Ve(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Rt(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function pe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function et(e){e._closedPromise=w((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a})}function z(e,t){et(e),Ve(e,t)}function Gr(e){et(e),ve(e)}function Ve(e,t){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Rt(e,t){z(e,t)}function ve(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let tt=s("[[AbortSteps]]"),er=s("[[ErrorSteps]]"),rt=s("[[CancelSteps]]"),nt=s("[[PullSteps]]"),tr=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},l=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function i(e){return typeof e=="object"||typeof e=="function"}function g(e,t){if(e!==void 0&&!i(e))throw new TypeError(`${t} is not an object.`)}function f(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function j(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Q(e,t){if(!j(e))throw new TypeError(`${t} is not an object.`)}function $(e,t,a){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${a}'.`)}function te(e,t,a){if(e===void 0)throw new TypeError(`${t} is required in '${a}'.`)}function le(e){return Number(e)}function De(e){return e===0?0:e}function ee(e){return De(l(e))}function he(e,t){let u=Number.MAX_SAFE_INTEGER,d=Number(e);if(d=De(d),!tr(d))throw new TypeError(`${t} is not a finite number`);if(d=ee(d),d<0||d>u)throw new TypeError(`${t} is outside the accepted range of 0 to ${u}, inclusive`);return!tr(d)||d===0?0:d}function At(e,t){if(!Ue(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Ne(e){return new Ct(e)}function at(e,t){e._reader._readRequests.push(t)}function ot(e,t,a){let d=e._reader._readRequests.shift();a?d._closeSteps():d._chunkSteps(t)}function rr(e){return e._reader._readRequests.length}function zn(e){let t=e._reader;return!(t===void 0||!qe(t))}class Ct{constructor(t){if($(t,1,"ReadableStreamDefaultReader"),At(t,"First parameter"),ze(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");G(this,t),this._readRequests=new ne}get closed(){return qe(this)?this._closedPromise:v(nr("closed"))}cancel(t=void 0){return qe(this)?this._ownerReadableStream===void 0?v(pe("cancel")):Oe(this,t):v(nr("cancel"))}read(){if(!qe(this))return v(nr("read"));if(this._ownerReadableStream===void 0)return v(pe("read from"));let t,a,u=w((_,S)=>{t=_,a=S});return Pt(this,{_chunkSteps:_=>t({value:_,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:_=>a(_)}),u}releaseLock(){if(!qe(this))throw nr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(Ct.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Ct.prototype,s.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function qe(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Ct}function Pt(e,t){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?t._closeSteps():a._state==="errored"?t._errorSteps(a._storedError):a._readableStreamController[nt](t)}function nr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let jn=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Kn{constructor(t,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=a}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?q(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let a=()=>this._returnSteps(t);return this._ongoingPromise?q(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return v(pe("iterate"));let a,u,d=w((S,A)=>{a=S,u=A});return Pt(t,{_chunkSteps:S=>{this._ongoingPromise=void 0,K(()=>a({value:S,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,de(t),a({value:void 0,done:!0})},_errorSteps:S=>{this._ongoingPromise=void 0,this._isFinished=!0,de(t),u(S)}}),d}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return v(pe("finish iterating"));if(!this._preventCancel){let u=Oe(a,t);return de(a),q(u,()=>({value:t,done:!0}))}return de(a),T({value:t,done:!0})}}let $n={next(){return Hn(this)?this._asyncIteratorImpl.next():v(Vn("next"))},return(e){return Hn(this)?this._asyncIteratorImpl.return(e):v(Vn("return"))}};jn!==void 0&&Object.setPrototypeOf($n,jn);function ni(e,t){let a=Ne(e),u=new Kn(a,t),d=Object.create($n);return d._asyncIteratorImpl=u,d}function Hn(e){if(!y(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Kn}catch{return!1}}function Vn(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Yn=Number.isNaN||function(e){return e!==e};function Ft(e){return e.slice()}function Gn(e,t,a,u,d){new Uint8Array(e).set(new Uint8Array(a,u,d),t)}function Il(e){return e}function ar(e){return!1}function Qn(e,t,a){if(e.slice)return e.slice(t,a);let u=a-t,d=new ArrayBuffer(u);return Gn(d,0,e,t,u),d}function ai(e){return!(typeof e!="number"||Yn(e)||e<0)}function Xn(e){let t=Qn(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Qr(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Xr(e,t,a){if(!ai(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:a}),e._queueTotalSize+=a}function oi(e){return e._queue.peek().value}function We(e){e._queue=new ne,e._queueTotalSize=0}class Ot{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Zr(this))throw rn("view");return this._view}respond(t){if(!Zr(this))throw rn("respond");if($(t,1,"respond"),t=he(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");ar(this._view.buffer),ur(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!Zr(this))throw rn("respondWithNewView");if($(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");ar(t.buffer),cr(this._associatedReadableByteStreamController,t)}}Object.defineProperties(Ot.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,s.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class it{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Ye(this))throw Nt("byobRequest");return tn(this)}get desiredSize(){if(!Ye(this))throw Nt("desiredSize");return oa(this)}close(){if(!Ye(this))throw Nt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);Dt(this)}enqueue(t){if(!Ye(this))throw Nt("enqueue");if($(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);lr(this,t)}error(t=void 0){if(!Ye(this))throw Nt("error");ge(this,t)}[rt](t){Zn(this),We(this);let a=this._cancelAlgorithm(t);return sr(this),a}[nt](t){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let d=this._queue.shift();this._queueTotalSize-=d.byteLength,ra(this);let _=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);t._chunkSteps(_);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let d;try{d=new ArrayBuffer(u)}catch(S){t._errorSteps(S);return}let _={buffer:d,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(_)}at(a,t),Ge(this)}}Object.defineProperties(it.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(it.prototype,s.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ye(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof it}function Zr(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Ot}function Ge(e){if(!ui(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();P(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ge(e))},u=>{ge(e,u)})}function Zn(e){en(e),e._pendingPullIntos=new ne}function Jr(e,t){let a=!1;e._state==="closed"&&(a=!0);let u=Jn(t);t.readerType==="default"?ot(e,u,a):di(e,u,a)}function Jn(e){let t=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/a)}function or(e,t,a,u){e._queue.push({buffer:t,byteOffset:a,byteLength:u}),e._queueTotalSize+=u}function ea(e,t){let a=t.elementSize,u=t.bytesFilled-t.bytesFilled%a,d=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),_=t.bytesFilled+d,S=_-_%a,A=d,O=!1;S>u&&(A=S-t.bytesFilled,O=!0);let L=e._queue;for(;A>0;){let x=L.peek(),M=Math.min(A,x.byteLength),Z=t.byteOffset+t.bytesFilled;Gn(t.buffer,Z,x.buffer,x.byteOffset,M),x.byteLength===M?L.shift():(x.byteOffset+=M,x.byteLength-=M),e._queueTotalSize-=M,ta(e,M,t),A-=M}return O}function ta(e,t,a){a.bytesFilled+=t}function ra(e){e._queueTotalSize===0&&e._closeRequested?(sr(e),Mt(e._controlledReadableByteStream)):Ge(e)}function en(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function na(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();ea(e,t)&&(ir(e),Jr(e._controlledReadableByteStream,t))}}function ii(e,t,a){let u=e._controlledReadableByteStream,d=1;t.constructor!==DataView&&(d=t.constructor.BYTES_PER_ELEMENT);let _=t.constructor,S=t.buffer,A={buffer:S,bufferByteLength:S.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:d,viewConstructor:_,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(A),la(u,a);return}if(u._state==="closed"){let O=new _(A.buffer,A.byteOffset,0);a._closeSteps(O);return}if(e._queueTotalSize>0){if(ea(e,A)){let O=Jn(A);ra(e),a._chunkSteps(O);return}if(e._closeRequested){let O=new TypeError("Insufficient bytes to fill elements in the given buffer");ge(e,O),a._errorSteps(O);return}}e._pendingPullIntos.push(A),la(u,a),Ge(e)}function si(e,t){let a=e._controlledReadableByteStream;if(nn(a))for(;ua(a)>0;){let u=ir(e);Jr(a,u)}}function li(e,t,a){if(ta(e,t,a),a.bytesFilled<a.elementSize)return;ir(e);let u=a.bytesFilled%a.elementSize;if(u>0){let d=a.byteOffset+a.bytesFilled,_=Qn(a.buffer,d-u,d);or(e,_,0,_.byteLength)}a.bytesFilled-=u,Jr(e._controlledReadableByteStream,a),na(e)}function aa(e,t){let a=e._pendingPullIntos.peek();en(e),e._controlledReadableByteStream._state==="closed"?si(e):li(e,t,a),Ge(e)}function ir(e){return e._pendingPullIntos.shift()}function ui(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(zn(t)&&rr(t)>0||nn(t)&&ua(t)>0||oa(e)>0)}function sr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Dt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ge(e,u),u}sr(e),Mt(t)}}function lr(e,t){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let u=t.buffer,d=t.byteOffset,_=t.byteLength,S=u;if(e._pendingPullIntos.length>0){let A=e._pendingPullIntos.peek();ar(A.buffer),A.buffer=A.buffer}if(en(e),zn(a))if(rr(a)===0)or(e,S,d,_);else{e._pendingPullIntos.length>0&&ir(e);let A=new Uint8Array(S,d,_);ot(a,A,!1)}else nn(a)?(or(e,S,d,_),na(e)):or(e,S,d,_);Ge(e)}function ge(e,t){let a=e._controlledReadableByteStream;a._state==="readable"&&(Zn(e),We(e),sr(e),Ba(a,t))}function tn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),a=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),u=Object.create(Ot.prototype);fi(u,e,a),e._byobRequest=u}return e._byobRequest}function oa(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function ur(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+t>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,aa(e,t)}function cr(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+t.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let d=t.byteLength;a.buffer=t.buffer,aa(e,d)}function ia(e,t,a,u,d,_,S){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,We(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=_,t._pullAlgorithm=u,t._cancelAlgorithm=d,t._autoAllocateChunkSize=S,t._pendingPullIntos=new ne,e._readableStreamController=t;let A=a();P(T(A),()=>{t._started=!0,Ge(t)},O=>{ge(t,O)})}function ci(e,t,a){let u=Object.create(it.prototype),d=()=>{},_=()=>T(void 0),S=()=>T(void 0);t.start!==void 0&&(d=()=>t.start(u)),t.pull!==void 0&&(_=()=>t.pull(u)),t.cancel!==void 0&&(S=O=>t.cancel(O));let A=t.autoAllocateChunkSize;if(A===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ia(e,u,d,_,S,a,A)}function fi(e,t,a){e._associatedReadableByteStreamController=t,e._view=a}function rn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Nt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function sa(e){return new Bt(e)}function la(e,t){e._reader._readIntoRequests.push(t)}function di(e,t,a){let d=e._reader._readIntoRequests.shift();a?d._closeSteps(t):d._chunkSteps(t)}function ua(e){return e._reader._readIntoRequests.length}function nn(e){let t=e._reader;return!(t===void 0||!Qe(t))}class Bt{constructor(t){if($(t,1,"ReadableStreamBYOBReader"),At(t,"First parameter"),ze(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ye(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");G(this,t),this._readIntoRequests=new ne}get closed(){return Qe(this)?this._closedPromise:v(fr("closed"))}cancel(t=void 0){return Qe(this)?this._ownerReadableStream===void 0?v(pe("cancel")):Oe(this,t):v(fr("cancel"))}read(t){if(!Qe(this))return v(fr("read"));if(!ArrayBuffer.isView(t))return v(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return v(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return v(new TypeError("view's buffer must have non-zero byteLength"));if(ar(t.buffer),this._ownerReadableStream===void 0)return v(pe("read from"));let a,u,d=w((S,A)=>{a=S,u=A});return ca(this,t,{_chunkSteps:S=>a({value:S,done:!1}),_closeSteps:S=>a({value:S,done:!0}),_errorSteps:S=>u(S)}),d}releaseLock(){if(!Qe(this))throw fr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(Bt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,s.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Qe(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Bt}function ca(e,t,a){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?a._errorSteps(u._storedError):ii(u._readableStreamController,t,a)}function fr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function It(e,t){let{highWaterMark:a}=e;if(a===void 0)return t;if(Yn(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function dr(e){let{size:t}=e;return t||(()=>1)}function hr(e,t){g(e,t);let a=e?.highWaterMark,u=e?.size;return{highWaterMark:a===void 0?void 0:le(a),size:u===void 0?void 0:hi(u,`${t} has member 'size' that`)}}function hi(e,t){return f(e,t),a=>le(e(a))}function mi(e,t){g(e,t);let a=e?.abort,u=e?.close,d=e?.start,_=e?.type,S=e?.write;return{abort:a===void 0?void 0:bi(a,e,`${t} has member 'abort' that`),close:u===void 0?void 0:yi(u,e,`${t} has member 'close' that`),start:d===void 0?void 0:pi(d,e,`${t} has member 'start' that`),write:S===void 0?void 0:gi(S,e,`${t} has member 'write' that`),type:_}}function bi(e,t,a){return f(e,a),u=>m(e,t,[u])}function yi(e,t,a){return f(e,a),()=>m(e,t,[])}function pi(e,t,a){return f(e,a),u=>Fe(e,t,[u])}function gi(e,t,a){return f(e,a),(u,d)=>m(e,t,[u,d])}function fa(e,t){if(!st(e))throw new TypeError(`${t} is not a WritableStream.`)}function _i(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Si=typeof AbortController=="function";function Ti(){if(Si)return new AbortController}class kt{constructor(t={},a={}){t===void 0?t=null:Q(t,"First parameter");let u=hr(a,"Second parameter"),d=mi(t,"First parameter");if(ha(this),d.type!==void 0)throw new RangeError("Invalid type is specified");let S=dr(u),A=It(u,1);ki(this,d,A,S)}get locked(){if(!st(this))throw gr("locked");return lt(this)}abort(t=void 0){return st(this)?lt(this)?v(new TypeError("Cannot abort a stream that already has a writer")):mr(this,t):v(gr("abort"))}close(){return st(this)?lt(this)?v(new TypeError("Cannot close a stream that already has a writer")):Re(this)?v(new TypeError("Cannot close an already-closing stream")):ma(this):v(gr("close"))}getWriter(){if(!st(this))throw gr("getWriter");return da(this)}}Object.defineProperties(kt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,s.toStringTag,{value:"WritableStream",configurable:!0});function da(e){return new Lt(e)}function Ei(e,t,a,u,d=1,_=()=>1){let S=Object.create(kt.prototype);ha(S);let A=Object.create(ut.prototype);return Sa(S,A,e,t,a,u,d,_),S}function ha(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new ne,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function st(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof kt}function lt(e){return e._writer!==void 0}function mr(e,t){var a;if(e._state==="closed"||e._state==="errored")return T(void 0);e._writableStreamController._abortReason=t,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let u=e._state;if(u==="closed"||u==="errored")return T(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let d=!1;u==="erroring"&&(d=!0,t=void 0);let _=w((S,A)=>{e._pendingAbortRequest={_promise:void 0,_resolve:S,_reject:A,_reason:t,_wasAlreadyErroring:d}});return e._pendingAbortRequest._promise=_,d||on(e,t),_}function ma(e){let t=e._state;if(t==="closed"||t==="errored")return v(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let a=w((d,_)=>{let S={_resolve:d,_reject:_};e._closeRequest=S}),u=e._writer;return u!==void 0&&e._backpressure&&t==="writable"&&bn(u),Li(e._writableStreamController),a}function wi(e){return w((a,u)=>{let d={_resolve:a,_reject:u};e._writeRequests.push(d)})}function an(e,t){if(e._state==="writable"){on(e,t);return}sn(e)}function on(e,t){let a=e._writableStreamController;e._state="erroring",e._storedError=t;let u=e._writer;u!==void 0&&ya(u,t),!Pi(e)&&a._started&&sn(e)}function sn(e){e._state="errored",e._writableStreamController[er]();let t=e._storedError;if(e._writeRequests.forEach(d=>{d._reject(t)}),e._writeRequests=new ne,e._pendingAbortRequest===void 0){br(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(t),br(e);return}let u=e._writableStreamController[tt](a._reason);P(u,()=>{a._resolve(),br(e)},d=>{a._reject(d),br(e)})}function vi(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Ri(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,an(e,t)}function Ai(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&va(a)}function Ci(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),an(e,t)}function Re(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Pi(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Fi(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Oi(e){e._inFlightWriteRequest=e._writeRequests.shift()}function br(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&hn(t,e._storedError)}function ln(e,t){let a=e._writer;a!==void 0&&t!==e._backpressure&&(t?ji(a):bn(a)),e._backpressure=t}class Lt{constructor(t){if($(t,1,"WritableStreamDefaultWriter"),fa(t,"First parameter"),lt(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let a=t._state;if(a==="writable")!Re(t)&&t._backpressure?Sr(this):Ra(this),_r(this);else if(a==="erroring")mn(this,t._storedError),_r(this);else if(a==="closed")Ra(this),Ui(this);else{let u=t._storedError;mn(this,u),wa(this,u)}}get closed(){return Xe(this)?this._closedPromise:v(Ze("closed"))}get desiredSize(){if(!Xe(this))throw Ze("desiredSize");if(this._ownerWritableStream===void 0)throw qt("desiredSize");return Ii(this)}get ready(){return Xe(this)?this._readyPromise:v(Ze("ready"))}abort(t=void 0){return Xe(this)?this._ownerWritableStream===void 0?v(qt("abort")):Di(this,t):v(Ze("abort"))}close(){if(!Xe(this))return v(Ze("close"));let t=this._ownerWritableStream;return t===void 0?v(qt("close")):Re(t)?v(new TypeError("Cannot close an already-closing stream")):ba(this)}releaseLock(){if(!Xe(this))throw Ze("releaseLock");this._ownerWritableStream!==void 0&&pa(this)}write(t=void 0){return Xe(this)?this._ownerWritableStream===void 0?v(qt("write to")):ga(this,t):v(Ze("write"))}}Object.defineProperties(Lt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,s.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Xe(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Lt}function Di(e,t){let a=e._ownerWritableStream;return mr(a,t)}function ba(e){let t=e._ownerWritableStream;return ma(t)}function Ni(e){let t=e._ownerWritableStream,a=t._state;return Re(t)||a==="closed"?T(void 0):a==="errored"?v(t._storedError):ba(e)}function Bi(e,t){e._closedPromiseState==="pending"?hn(e,t):zi(e,t)}function ya(e,t){e._readyPromiseState==="pending"?Aa(e,t):Ki(e,t)}function Ii(e){let t=e._ownerWritableStream,a=t._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Ta(t._writableStreamController)}function pa(e){let t=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ya(e,a),Bi(e,a),t._writer=void 0,e._ownerWritableStream=void 0}function ga(e,t){let a=e._ownerWritableStream,u=a._writableStreamController,d=qi(u,t);if(a!==e._ownerWritableStream)return v(qt("write to"));let _=a._state;if(_==="errored")return v(a._storedError);if(Re(a)||_==="closed")return v(new TypeError("The stream is closing or closed and cannot be written to"));if(_==="erroring")return v(a._storedError);let S=wi(a);return Wi(u,t,d),S}let _a={};class ut{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!un(this))throw dn("abortReason");return this._abortReason}get signal(){if(!un(this))throw dn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!un(this))throw dn("error");this._controlledWritableStream._state==="writable"&&Ea(this,t)}[tt](t){let a=this._abortAlgorithm(t);return yr(this),a}[er](){We(this)}}Object.defineProperties(ut.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(ut.prototype,s.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function un(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof ut}function Sa(e,t,a,u,d,_,S,A){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,We(t),t._abortReason=void 0,t._abortController=Ti(),t._started=!1,t._strategySizeAlgorithm=A,t._strategyHWM=S,t._writeAlgorithm=u,t._closeAlgorithm=d,t._abortAlgorithm=_;let O=fn(t);ln(e,O);let L=a(),x=T(L);P(x,()=>{t._started=!0,pr(t)},M=>{t._started=!0,an(e,M)})}function ki(e,t,a,u){let d=Object.create(ut.prototype),_=()=>{},S=()=>T(void 0),A=()=>T(void 0),O=()=>T(void 0);t.start!==void 0&&(_=()=>t.start(d)),t.write!==void 0&&(S=L=>t.write(L,d)),t.close!==void 0&&(A=()=>t.close()),t.abort!==void 0&&(O=L=>t.abort(L)),Sa(e,d,_,S,A,O,a,u)}function yr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Li(e){Xr(e,_a,0),pr(e)}function qi(e,t){try{return e._strategySizeAlgorithm(t)}catch(a){return cn(e,a),1}}function Ta(e){return e._strategyHWM-e._queueTotalSize}function Wi(e,t,a){try{Xr(e,t,a)}catch(d){cn(e,d);return}let u=e._controlledWritableStream;if(!Re(u)&&u._state==="writable"){let d=fn(e);ln(u,d)}pr(e)}function pr(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){sn(t);return}if(e._queue.length===0)return;let u=oi(e);u===_a?xi(e):Mi(e,u)}function cn(e,t){e._controlledWritableStream._state==="writable"&&Ea(e,t)}function xi(e){let t=e._controlledWritableStream;Fi(t),Qr(e);let a=e._closeAlgorithm();yr(e),P(a,()=>{Ai(t)},u=>{Ci(t,u)})}function Mi(e,t){let a=e._controlledWritableStream;Oi(a);let u=e._writeAlgorithm(t);P(u,()=>{vi(a);let d=a._state;if(Qr(e),!Re(a)&&d==="writable"){let _=fn(e);ln(a,_)}pr(e)},d=>{a._state==="writable"&&yr(e),Ri(a,d)})}function fn(e){return Ta(e)<=0}function Ea(e,t){let a=e._controlledWritableStream;yr(e),on(a,t)}function gr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function dn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Ze(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function qt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function _r(e){e._closedPromise=w((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function wa(e,t){_r(e),hn(e,t)}function Ui(e){_r(e),va(e)}function hn(e,t){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function zi(e,t){wa(e,t)}function va(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Sr(e){e._readyPromise=w((t,a)=>{e._readyPromise_resolve=t,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function mn(e,t){Sr(e),Aa(e,t)}function Ra(e){Sr(e),bn(e)}function Aa(e,t){e._readyPromise_reject!==void 0&&(H(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ji(e){Sr(e)}function Ki(e,t){mn(e,t)}function bn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Ca=typeof DOMException<"u"?DOMException:void 0;function $i(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Hi(){let e=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Vi=$i(Ca)?Ca:Hi();function Pa(e,t,a,u,d,_){let S=Ne(e),A=da(t);e._disturbed=!0;let O=!1,L=T(void 0);return w((x,M)=>{let Z;if(_!==void 0){if(Z=()=>{let C=new Vi("Aborted","AbortError"),k=[];u||k.push(()=>t._state==="writable"?mr(t,C):T(void 0)),d||k.push(()=>e._state==="readable"?_e(e,C):T(void 0)),ue(()=>Promise.all(k.map(Y=>Y())),!0,C)},_.aborted){Z();return}_.addEventListener("abort",Z)}function Se(){return w((C,k)=>{function Y(fe){fe?C():N(dt(),Y,k)}Y(!1)})}function dt(){return O?T(!0):N(A._readyPromise,()=>w((C,k)=>{Pt(S,{_chunkSteps:Y=>{L=N(ga(A,Y),void 0,c),C(!1)},_closeSteps:()=>C(!0),_errorSteps:k})}))}if(Be(e,S._closedPromise,C=>{u?me(!0,C):ue(()=>mr(t,C),!0,C)}),Be(t,A._closedPromise,C=>{d?me(!0,C):ue(()=>_e(e,C),!0,C)}),se(e,S._closedPromise,()=>{a?me():ue(()=>Ni(A))}),Re(t)||t._state==="closed"){let C=new TypeError("the destination writable stream closed before all data could be piped to it");d?me(!0,C):ue(()=>_e(e,C),!0,C)}H(Se());function je(){let C=L;return N(L,()=>C!==L?je():void 0)}function Be(C,k,Y){C._state==="errored"?Y(C._storedError):W(k,Y)}function se(C,k,Y){C._state==="closed"?Y():J(k,Y)}function ue(C,k,Y){if(O)return;O=!0,t._state==="writable"&&!Re(t)?J(je(),fe):fe();function fe(){P(C(),()=>Ie(k,Y),ht=>Ie(!0,ht))}}function me(C,k){O||(O=!0,t._state==="writable"&&!Re(t)?J(je(),()=>Ie(C,k)):Ie(C,k))}function Ie(C,k){pa(A),de(S),_!==void 0&&_.removeEventListener("abort",Z),C?M(k):x(void 0)}})}class ct{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Tr(this))throw vr("desiredSize");return yn(this)}close(){if(!Tr(this))throw vr("close");if(!ft(this))throw new TypeError("The stream is not in a state that permits close");xt(this)}enqueue(t=void 0){if(!Tr(this))throw vr("enqueue");if(!ft(this))throw new TypeError("The stream is not in a state that permits enqueue");return wr(this,t)}error(t=void 0){if(!Tr(this))throw vr("error");xe(this,t)}[rt](t){We(this);let a=this._cancelAlgorithm(t);return Er(this),a}[nt](t){let a=this._controlledReadableStream;if(this._queue.length>0){let u=Qr(this);this._closeRequested&&this._queue.length===0?(Er(this),Mt(a)):Wt(this),t._chunkSteps(u)}else at(a,t),Wt(this)}}Object.defineProperties(ct.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(ct.prototype,s.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Tr(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof ct}function Wt(e){if(!Fa(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();P(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Wt(e))},u=>{xe(e,u)})}function Fa(e){let t=e._controlledReadableStream;return!ft(e)||!e._started?!1:!!(ze(t)&&rr(t)>0||yn(e)>0)}function Er(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function xt(e){if(!ft(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Er(e),Mt(t))}function wr(e,t){if(!ft(e))return;let a=e._controlledReadableStream;if(ze(a)&&rr(a)>0)ot(a,t,!1);else{let u;try{u=e._strategySizeAlgorithm(t)}catch(d){throw xe(e,d),d}try{Xr(e,t,u)}catch(d){throw xe(e,d),d}}Wt(e)}function xe(e,t){let a=e._controlledReadableStream;a._state==="readable"&&(We(e),Er(e),Ba(a,t))}function yn(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Yi(e){return!Fa(e)}function ft(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function Oa(e,t,a,u,d,_,S){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,We(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=S,t._strategyHWM=_,t._pullAlgorithm=u,t._cancelAlgorithm=d,e._readableStreamController=t;let A=a();P(T(A),()=>{t._started=!0,Wt(t)},O=>{xe(t,O)})}function Gi(e,t,a,u){let d=Object.create(ct.prototype),_=()=>{},S=()=>T(void 0),A=()=>T(void 0);t.start!==void 0&&(_=()=>t.start(d)),t.pull!==void 0&&(S=()=>t.pull(d)),t.cancel!==void 0&&(A=O=>t.cancel(O)),Oa(e,d,_,S,A,a,u)}function vr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Qi(e,t){return Ye(e._readableStreamController)?Zi(e):Xi(e)}function Xi(e,t){let a=Ne(e),u=!1,d=!1,_=!1,S=!1,A,O,L,x,M,Z=w(se=>{M=se});function Se(){return u?(d=!0,T(void 0)):(u=!0,Pt(a,{_chunkSteps:ue=>{K(()=>{d=!1;let me=ue,Ie=ue;_||wr(L._readableStreamController,me),S||wr(x._readableStreamController,Ie),u=!1,d&&Se()})},_closeSteps:()=>{u=!1,_||xt(L._readableStreamController),S||xt(x._readableStreamController),(!_||!S)&&M(void 0)},_errorSteps:()=>{u=!1}}),T(void 0))}function dt(se){if(_=!0,A=se,S){let ue=Ft([A,O]),me=_e(e,ue);M(me)}return Z}function je(se){if(S=!0,O=se,_){let ue=Ft([A,O]),me=_e(e,ue);M(me)}return Z}function Be(){}return L=pn(Be,Se,dt),x=pn(Be,Se,je),W(a._closedPromise,se=>{xe(L._readableStreamController,se),xe(x._readableStreamController,se),(!_||!S)&&M(void 0)}),[L,x]}function Zi(e){let t=Ne(e),a=!1,u=!1,d=!1,_=!1,S=!1,A,O,L,x,M,Z=w(C=>{M=C});function Se(C){W(C._closedPromise,k=>{C===t&&(ge(L._readableStreamController,k),ge(x._readableStreamController,k),(!_||!S)&&M(void 0))})}function dt(){Qe(t)&&(de(t),t=Ne(e),Se(t)),Pt(t,{_chunkSteps:k=>{K(()=>{u=!1,d=!1;let Y=k,fe=k;if(!_&&!S)try{fe=Xn(k)}catch(ht){ge(L._readableStreamController,ht),ge(x._readableStreamController,ht),M(_e(e,ht));return}_||lr(L._readableStreamController,Y),S||lr(x._readableStreamController,fe),a=!1,u?Be():d&&se()})},_closeSteps:()=>{a=!1,_||Dt(L._readableStreamController),S||Dt(x._readableStreamController),L._readableStreamController._pendingPullIntos.length>0&&ur(L._readableStreamController,0),x._readableStreamController._pendingPullIntos.length>0&&ur(x._readableStreamController,0),(!_||!S)&&M(void 0)},_errorSteps:()=>{a=!1}})}function je(C,k){qe(t)&&(de(t),t=sa(e),Se(t));let Y=k?x:L,fe=k?L:x;ca(t,C,{_chunkSteps:mt=>{K(()=>{u=!1,d=!1;let bt=k?S:_;if(k?_:S)bt||cr(Y._readableStreamController,mt);else{let Ha;try{Ha=Xn(mt)}catch(_n){ge(Y._readableStreamController,_n),ge(fe._readableStreamController,_n),M(_e(e,_n));return}bt||cr(Y._readableStreamController,mt),lr(fe._readableStreamController,Ha)}a=!1,u?Be():d&&se()})},_closeSteps:mt=>{a=!1;let bt=k?S:_,Br=k?_:S;bt||Dt(Y._readableStreamController),Br||Dt(fe._readableStreamController),mt!==void 0&&(bt||cr(Y._readableStreamController,mt),!Br&&fe._readableStreamController._pendingPullIntos.length>0&&ur(fe._readableStreamController,0)),(!bt||!Br)&&M(void 0)},_errorSteps:()=>{a=!1}})}function Be(){if(a)return u=!0,T(void 0);a=!0;let C=tn(L._readableStreamController);return C===null?dt():je(C._view,!1),T(void 0)}function se(){if(a)return d=!0,T(void 0);a=!0;let C=tn(x._readableStreamController);return C===null?dt():je(C._view,!0),T(void 0)}function ue(C){if(_=!0,A=C,S){let k=Ft([A,O]),Y=_e(e,k);M(Y)}return Z}function me(C){if(S=!0,O=C,_){let k=Ft([A,O]),Y=_e(e,k);M(Y)}return Z}function Ie(){}return L=Na(Ie,Be,ue),x=Na(Ie,se,me),Se(t),[L,x]}function Ji(e,t){g(e,t);let a=e,u=a?.autoAllocateChunkSize,d=a?.cancel,_=a?.pull,S=a?.start,A=a?.type;return{autoAllocateChunkSize:u===void 0?void 0:he(u,`${t} has member 'autoAllocateChunkSize' that`),cancel:d===void 0?void 0:es(d,a,`${t} has member 'cancel' that`),pull:_===void 0?void 0:ts(_,a,`${t} has member 'pull' that`),start:S===void 0?void 0:rs(S,a,`${t} has member 'start' that`),type:A===void 0?void 0:ns(A,`${t} has member 'type' that`)}}function es(e,t,a){return f(e,a),u=>m(e,t,[u])}function ts(e,t,a){return f(e,a),u=>m(e,t,[u])}function rs(e,t,a){return f(e,a),u=>Fe(e,t,[u])}function ns(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function as(e,t){g(e,t);let a=e?.mode;return{mode:a===void 0?void 0:os(a,`${t} has member 'mode' that`)}}function os(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function is(e,t){return g(e,t),{preventCancel:!!e?.preventCancel}}function Da(e,t){g(e,t);let a=e?.preventAbort,u=e?.preventCancel,d=e?.preventClose,_=e?.signal;return _!==void 0&&ss(_,`${t} has member 'signal' that`),{preventAbort:!!a,preventCancel:!!u,preventClose:!!d,signal:_}}function ss(e,t){if(!_i(e))throw new TypeError(`${t} is not an AbortSignal.`)}function ls(e,t){g(e,t);let a=e?.readable;te(a,"readable","ReadableWritablePair"),At(a,`${t} has member 'readable' that`);let u=e?.writable;return te(u,"writable","ReadableWritablePair"),fa(u,`${t} has member 'writable' that`),{readable:a,writable:u}}class Me{constructor(t={},a={}){t===void 0?t=null:Q(t,"First parameter");let u=hr(a,"Second parameter"),d=Ji(t,"First parameter");if(gn(this),d.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let _=It(u,0);ci(this,d,_)}else{let _=dr(u),S=It(u,1);Gi(this,d,S,_)}}get locked(){if(!Ue(this))throw Je("locked");return ze(this)}cancel(t=void 0){return Ue(this)?ze(this)?v(new TypeError("Cannot cancel a stream that already has a reader")):_e(this,t):v(Je("cancel"))}getReader(t=void 0){if(!Ue(this))throw Je("getReader");return as(t,"First parameter").mode===void 0?Ne(this):sa(this)}pipeThrough(t,a={}){if(!Ue(this))throw Je("pipeThrough");$(t,1,"pipeThrough");let u=ls(t,"First parameter"),d=Da(a,"Second parameter");if(ze(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(lt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let _=Pa(this,u.writable,d.preventClose,d.preventAbort,d.preventCancel,d.signal);return H(_),u.readable}pipeTo(t,a={}){if(!Ue(this))return v(Je("pipeTo"));if(t===void 0)return v("Parameter 1 is required in 'pipeTo'.");if(!st(t))return v(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Da(a,"Second parameter")}catch(d){return v(d)}return ze(this)?v(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):lt(t)?v(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Pa(this,t,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ue(this))throw Je("tee");let t=Qi(this);return Ft(t)}values(t=void 0){if(!Ue(this))throw Je("values");let a=is(t,"First parameter");return ni(this,a.preventCancel)}}Object.defineProperties(Me.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Me.prototype,s.toStringTag,{value:"ReadableStream",configurable:!0}),typeof s.asyncIterator=="symbol"&&Object.defineProperty(Me.prototype,s.asyncIterator,{value:Me.prototype.values,writable:!0,configurable:!0});function pn(e,t,a,u=1,d=()=>1){let _=Object.create(Me.prototype);gn(_);let S=Object.create(ct.prototype);return Oa(_,S,e,t,a,u,d),_}function Na(e,t,a){let u=Object.create(Me.prototype);gn(u);let d=Object.create(it.prototype);return ia(u,d,e,t,a,0,void 0),u}function gn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ue(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Me}function ze(e){return e._reader!==void 0}function _e(e,t){if(e._disturbed=!0,e._state==="closed")return T(void 0);if(e._state==="errored")return v(e._storedError);Mt(e);let a=e._reader;a!==void 0&&Qe(a)&&(a._readIntoRequests.forEach(d=>{d._closeSteps(void 0)}),a._readIntoRequests=new ne);let u=e._readableStreamController[rt](t);return q(u,c)}function Mt(e){e._state="closed";let t=e._reader;t!==void 0&&(ve(t),qe(t)&&(t._readRequests.forEach(a=>{a._closeSteps()}),t._readRequests=new ne))}function Ba(e,t){e._state="errored",e._storedError=t;let a=e._reader;a!==void 0&&(Ve(a,t),qe(a)?(a._readRequests.forEach(u=>{u._errorSteps(t)}),a._readRequests=new ne):(a._readIntoRequests.forEach(u=>{u._errorSteps(t)}),a._readIntoRequests=new ne))}function Je(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ia(e,t){g(e,t);let a=e?.highWaterMark;return te(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:le(a)}}let ka=e=>e.byteLength;try{Object.defineProperty(ka,"name",{value:"size",configurable:!0})}catch{}class Rr{constructor(t){$(t,1,"ByteLengthQueuingStrategy"),t=Ia(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!qa(this))throw La("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!qa(this))throw La("size");return ka}}Object.defineProperties(Rr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,s.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function La(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function qa(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Rr}let Wa=()=>1;try{Object.defineProperty(Wa,"name",{value:"size",configurable:!0})}catch{}class Ar{constructor(t){$(t,1,"CountQueuingStrategy"),t=Ia(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Ma(this))throw xa("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ma(this))throw xa("size");return Wa}}Object.defineProperties(Ar.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Ar.prototype,s.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function xa(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ma(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Ar}function us(e,t){g(e,t);let a=e?.flush,u=e?.readableType,d=e?.start,_=e?.transform,S=e?.writableType;return{flush:a===void 0?void 0:cs(a,e,`${t} has member 'flush' that`),readableType:u,start:d===void 0?void 0:fs(d,e,`${t} has member 'start' that`),transform:_===void 0?void 0:ds(_,e,`${t} has member 'transform' that`),writableType:S}}function cs(e,t,a){return f(e,a),u=>m(e,t,[u])}function fs(e,t,a){return f(e,a),u=>Fe(e,t,[u])}function ds(e,t,a){return f(e,a),(u,d)=>m(e,t,[u,d])}class Cr{constructor(t={},a={},u={}){t===void 0&&(t=null);let d=hr(a,"Second parameter"),_=hr(u,"Third parameter"),S=us(t,"First parameter");if(S.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(S.writableType!==void 0)throw new RangeError("Invalid writableType specified");let A=It(_,0),O=dr(_),L=It(d,1),x=dr(d),M,Z=w(Se=>{M=Se});hs(this,Z,L,x,A,O),bs(this,S),S.start!==void 0?M(S.start(this._transformStreamController)):M(void 0)}get readable(){if(!Ua(this))throw $a("readable");return this._readable}get writable(){if(!Ua(this))throw $a("writable");return this._writable}}Object.defineProperties(Cr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,s.toStringTag,{value:"TransformStream",configurable:!0});function hs(e,t,a,u,d,_){function S(){return t}function A(Z){return gs(e,Z)}function O(Z){return _s(e,Z)}function L(){return Ss(e)}e._writable=Ei(S,A,L,O,a,u);function x(){return Ts(e)}function M(Z){return Fr(e,Z),T(void 0)}e._readable=pn(S,x,M,d,_),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Or(e,!0),e._transformStreamController=void 0}function Ua(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Cr}function Pr(e,t){xe(e._readable._readableStreamController,t),Fr(e,t)}function Fr(e,t){za(e._transformStreamController),cn(e._writable._writableStreamController,t),e._backpressure&&Or(e,!1)}function Or(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=w(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=t}class Ut{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Dr(this))throw Nr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return yn(t)}enqueue(t=void 0){if(!Dr(this))throw Nr("enqueue");ja(this,t)}error(t=void 0){if(!Dr(this))throw Nr("error");ys(this,t)}terminate(){if(!Dr(this))throw Nr("terminate");ps(this)}}Object.defineProperties(Ut.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,s.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Dr(e){return!y(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Ut}function ms(e,t,a,u){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=a,t._flushAlgorithm=u}function bs(e,t){let a=Object.create(Ut.prototype),u=_=>{try{return ja(a,_),T(void 0)}catch(S){return v(S)}},d=()=>T(void 0);t.transform!==void 0&&(u=_=>t.transform(_,a)),t.flush!==void 0&&(d=()=>t.flush(a)),ms(e,a,u,d)}function za(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ja(e,t){let a=e._controlledTransformStream,u=a._readable._readableStreamController;if(!ft(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{wr(u,t)}catch(_){throw Fr(a,_),a._readable._storedError}Yi(u)!==a._backpressure&&Or(a,!0)}function ys(e,t){Pr(e._controlledTransformStream,t)}function Ka(e,t){let a=e._transformAlgorithm(t);return q(a,void 0,u=>{throw Pr(e._controlledTransformStream,u),u})}function ps(e){let t=e._controlledTransformStream,a=t._readable._readableStreamController;xt(a);let u=new TypeError("TransformStream terminated");Fr(t,u)}function gs(e,t){let a=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return q(u,()=>{let d=e._writable;if(d._state==="erroring")throw d._storedError;return Ka(a,t)})}return Ka(a,t)}function _s(e,t){return Pr(e,t),T(void 0)}function Ss(e){let t=e._readable,a=e._transformStreamController,u=a._flushAlgorithm();return za(a),q(u,()=>{if(t._state==="errored")throw t._storedError;xt(t._readableStreamController)},d=>{throw Pr(e,d),t._storedError})}function Ts(e){return Or(e,!1),e._backpressureChangePromise}function Nr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function $a(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}o.ByteLengthQueuingStrategy=Rr,o.CountQueuingStrategy=Ar,o.ReadableByteStreamController=it,o.ReadableStream=Me,o.ReadableStreamBYOBReader=Bt,o.ReadableStreamBYOBRequest=Ot,o.ReadableStreamDefaultController=ct,o.ReadableStreamDefaultReader=Ct,o.TransformStream=Cr,o.TransformStreamDefaultController=Ut,o.WritableStream=kt,o.WritableStreamDefaultController=ut,o.WritableStreamDefaultWriter=Lt,Object.defineProperty(o,"__esModule",{value:!0})})}}),el=qn({"node_modules/fetch-blob/streams.cjs"(){var r=65536;if(!globalThis.ReadableStream)try{let n=require("process"),{emitWarning:o}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("stream/web")),n.emitWarning=o}catch(s){throw n.emitWarning=o,s}}catch{Object.assign(globalThis,Js())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(s){let c=0,h=this;return new ReadableStream({type:"bytes",async pull(p){let R=await h.slice(c,Math.min(h.size,c+r)).arrayBuffer();c+=R.byteLength,p.enqueue(new Uint8Array(R)),c===h.size&&p.close()}})})}catch{}}});async function*Rn(r,n=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(n){let s=o.byteOffset,c=o.byteOffset+o.byteLength;for(;s!==c;){let h=Math.min(c-s,Nn),p=o.buffer.slice(s,s+h);s+=p.byteLength,yield new Uint8Array(p)}}else yield o;else{let s=0,c=o;for(;s!==c.size;){let p=await c.slice(s,Math.min(c.size,s+Nn)).arrayBuffer();s+=p.byteLength,yield new Uint8Array(p)}}}var tl,Nn,An,Bn,Tt,Zt=Xt({"node_modules/fetch-blob/index.js"(){tl=ae(el()),Nn=65536,An=class In{#e=[];#t="";#r=0;#n="transparent";constructor(n=[],o={}){if(typeof n!="object"||n===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof n[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let s=new TextEncoder;for(let h of n){let p;ArrayBuffer.isView(h)?p=new Uint8Array(h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)):h instanceof ArrayBuffer?p=new Uint8Array(h.slice(0)):h instanceof In?p=h:p=s.encode(`${h}`),this.#r+=ArrayBuffer.isView(p)?p.byteLength:p.size,this.#e.push(p)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let c=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(c)?c:""}get size(){return this.#r}get type(){return this.#t}async text(){let n=new TextDecoder,o="";for await(let s of Rn(this.#e,!1))o+=n.decode(s,{stream:!0});return o+=n.decode(),o}async arrayBuffer(){let n=new Uint8Array(this.size),o=0;for await(let s of Rn(this.#e,!1))n.set(s,o),o+=s.length;return n.buffer}stream(){let n=Rn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let s=await n.next();s.done?o.close():o.enqueue(s.value)},async cancel(){await n.return()}})}slice(n=0,o=this.size,s=""){let{size:c}=this,h=n<0?Math.max(c+n,0):Math.min(n,c),p=o<0?Math.max(c+o,0):Math.min(o,c),y=Math.max(p-h,0),R=this.#e,E=[],I=0;for(let U of R){if(I>=y)break;let w=ArrayBuffer.isView(U)?U.byteLength:U.size;if(h&&w<=h)h-=w,p-=w;else{let T;ArrayBuffer.isView(U)?(T=U.subarray(h,Math.min(w,p)),I+=T.byteLength):(T=U.slice(h,Math.min(w,p)),I+=T.size),p-=w,E.push(T),h=0}}let X=new In([],{type:String(s).toLowerCase()});return X.#r=y,X.#e=E,X}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](n){return n&&typeof n=="object"&&typeof n.constructor=="function"&&(typeof n.stream=="function"||typeof n.arrayBuffer=="function")&&/^(Blob|File)$/.test(n[Symbol.toStringTag])}},Object.defineProperties(An.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Bn=An,Tt=Bn}}),vo,Ro,Jt,Mo=Xt({"node_modules/fetch-blob/file.js"(){Zt(),vo=class extends Tt{#e=0;#t="";constructor(n,o,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(n,s),s===null&&(s={});let c=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(c)||(this.#e=c),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](n){return!!n&&n instanceof Tt&&/^(File)$/.test(n[Symbol.toStringTag])}},Ro=vo,Jt=Ro}});function rl(r,n=Tt){var o=`${kn()}${kn()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],c=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((h,p)=>typeof h=="string"?s.push(c+Ur(p)+`"\r
\r
${h.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(c+Ur(p)+`"; filename="${Ur(h.name,1)}"\r
Content-Type: ${h.type||"application/octet-stream"}\r
\r
`,h,`\r
`)),s.push(`--${o}--`),new n(s,{type:"multipart/form-data; boundary="+o})}var pt,Ao,Co,kn,Po,Cn,Ur,Ke,Et,Vr=Xt({"node_modules/formdata-polyfill/esm.min.js"(){Zt(),Mo(),{toStringTag:pt,iterator:Ao,hasInstance:Co}=Symbol,kn=Math.random,Po="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Cn=(r,n,o)=>(r+="",/^(Blob|File)$/.test(n&&n[pt])?[(o=o!==void 0?o+"":n[pt]=="File"?n.name:"blob",r),n.name!==o||n[pt]=="blob"?new Jt([n],o,n):n]:[r,n+""]),Ur=(r,n)=>(n?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ke=(r,n,o)=>{if(n.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${n.length} present.`)},Et=class{#e=[];constructor(...n){if(n.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[pt](){return"FormData"}[Ao](){return this.entries()}static[Co](n){return n&&typeof n=="object"&&n[pt]==="FormData"&&!Po.some(o=>typeof n[o]!="function")}append(...n){Ke("append",arguments,2),this.#e.push(Cn(...n))}delete(n){Ke("delete",arguments,1),n+="",this.#e=this.#e.filter(([o])=>o!==n)}get(n){Ke("get",arguments,1),n+="";for(var o=this.#e,s=o.length,c=0;c<s;c++)if(o[c][0]===n)return o[c][1];return null}getAll(n,o){return Ke("getAll",arguments,1),o=[],n+="",this.#e.forEach(s=>s[0]===n&&o.push(s[1])),o}has(n){return Ke("has",arguments,1),n+="",this.#e.some(o=>o[0]===n)}forEach(n,o){Ke("forEach",arguments,1);for(var[s,c]of this)n.call(o,c,s,this)}set(...n){Ke("set",arguments,2);var o=[],s=!0;n=Cn(...n),this.#e.forEach(c=>{c[0]===n[0]?s&&(s=!o.push(n)):o.push(c)}),s&&o.push(n),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[n]of this)yield n}*values(){for(var[,n]of this)yield n}}}}),nl=qn({"node_modules/node-domexception/index.js"(r,n){if(!globalThis.DOMException)try{let{MessageChannel:o}=require("worker_threads"),s=new o().port1,c=new ArrayBuffer;s.postMessage(c,[c,c])}catch(o){o.constructor.name==="DOMException"&&(globalThis.DOMException=o.constructor)}n.exports=globalThis.DOMException}}),$t,Fo,Oo,Wr,Uo,zo,jo,Ko,Pn,Fn,xr,$o=Xt({"node_modules/fetch-blob/from.js"(){$t=ae(require("fs")),Fo=ae(require("path")),Oo=ae(nl()),Mo(),Zt(),{stat:Wr}=$t.promises,Uo=(r,n)=>Pn((0,$t.statSync)(r),r,n),zo=(r,n)=>Wr(r).then(o=>Pn(o,r,n)),jo=(r,n)=>Wr(r).then(o=>Fn(o,r,n)),Ko=(r,n)=>Fn((0,$t.statSync)(r),r,n),Pn=(r,n,o="")=>new Tt([new xr({path:n,size:r.size,lastModified:r.mtimeMs,start:0})],{type:o}),Fn=(r,n,o="")=>new Jt([new xr({path:n,size:r.size,lastModified:r.mtimeMs,start:0})],(0,Fo.basename)(n),{type:o,lastModified:r.mtimeMs}),xr=class{#e;#t;constructor(r){this.#e=r.path,this.#t=r.start,this.size=r.size,this.lastModified=r.lastModified}slice(r,n){return new xr({path:this.#e,lastModified:this.lastModified,size:n-r,start:this.#t+r})}async*stream(){let{mtimeMs:r}=await Wr(this.#e);if(r>this.lastModified)throw new Oo.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,$t.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}}}),Ho={};xo(Ho,{toFormData:()=>ol});function al(r){let n=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!n)return;let o=n[2]||n[3]||"",s=o.slice(o.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(c,h)=>String.fromCharCode(h)),s}async function ol(r,n){if(!/multipart/i.test(n))throw new TypeError("Failed to fetch");let o=n.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new Vo(o[1]||o[2]),c,h,p,y,R,E,I=[],X=new Et,U=P=>{p+=N.decode(P,{stream:!0})},w=P=>{I.push(P)},T=()=>{let P=new Jt(I,E,{type:R});X.append(y,P)},v=()=>{X.append(y,p)},N=new TextDecoder("utf-8");N.decode(),s.onPartBegin=function(){s.onPartData=U,s.onPartEnd=v,c="",h="",p="",y="",R="",E=null,I.length=0},s.onHeaderField=function(P){c+=N.decode(P,{stream:!0})},s.onHeaderValue=function(P){h+=N.decode(P,{stream:!0})},s.onHeaderEnd=function(){if(h+=N.decode(),c=c.toLowerCase(),c==="content-disposition"){let P=h.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);P&&(y=P[2]||P[3]||""),E=al(h),E&&(s.onPartData=w,s.onPartEnd=T)}else c==="content-type"&&(R=h);h="",c=""};for await(let P of r)s.write(P);return s.end(),X}var Te,V,On,Le,Ht,Vt,Do,gt,No,Bo,Io,ko,$e,Vo,il=Xt({"node_modules/node-fetch/src/utils/multipart-parser.js"(){$o(),Vr(),Te=0,V={START_BOUNDARY:Te++,HEADER_FIELD_START:Te++,HEADER_FIELD:Te++,HEADER_VALUE_START:Te++,HEADER_VALUE:Te++,HEADER_VALUE_ALMOST_DONE:Te++,HEADERS_ALMOST_DONE:Te++,PART_DATA_START:Te++,PART_DATA:Te++,END:Te++},On=1,Le={PART_BOUNDARY:On,LAST_BOUNDARY:On*=2},Ht=10,Vt=13,Do=32,gt=45,No=58,Bo=97,Io=122,ko=r=>r|32,$e=()=>{},Vo=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=$e,this.onHeaderField=$e,this.onHeadersEnd=$e,this.onHeaderValue=$e,this.onPartBegin=$e,this.onPartData=$e,this.onPartEnd=$e,this.boundaryChars={},r=`\r
--`+r;let n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=V.START_BOUNDARY}write(r){let n=0,o=r.length,s=this.index,{lookbehind:c,boundary:h,boundaryChars:p,index:y,state:R,flags:E}=this,I=this.boundary.length,X=I-1,U=r.length,w,T,v=W=>{this[W+"Mark"]=n},N=W=>{delete this[W+"Mark"]},P=(W,q,H,K)=>{(q===void 0||q!==H)&&this[W](K&&K.subarray(q,H))},J=(W,q)=>{let H=W+"Mark";H in this&&(q?(P(W,this[H],n,r),delete this[H]):(P(W,this[H],r.length,r),this[H]=0))};for(n=0;n<o;n++)switch(w=r[n],R){case V.START_BOUNDARY:if(y===h.length-2){if(w===gt)E|=Le.LAST_BOUNDARY;else if(w!==Vt)return;y++;break}else if(y-1===h.length-2){if(E&Le.LAST_BOUNDARY&&w===gt)R=V.END,E=0;else if(!(E&Le.LAST_BOUNDARY)&&w===Ht)y=0,P("onPartBegin"),R=V.HEADER_FIELD_START;else return;break}w!==h[y+2]&&(y=-2),w===h[y+2]&&y++;break;case V.HEADER_FIELD_START:R=V.HEADER_FIELD,v("onHeaderField"),y=0;case V.HEADER_FIELD:if(w===Vt){N("onHeaderField"),R=V.HEADERS_ALMOST_DONE;break}if(y++,w===gt)break;if(w===No){if(y===1)return;J("onHeaderField",!0),R=V.HEADER_VALUE_START;break}if(T=ko(w),T<Bo||T>Io)return;break;case V.HEADER_VALUE_START:if(w===Do)break;v("onHeaderValue"),R=V.HEADER_VALUE;case V.HEADER_VALUE:w===Vt&&(J("onHeaderValue",!0),P("onHeaderEnd"),R=V.HEADER_VALUE_ALMOST_DONE);break;case V.HEADER_VALUE_ALMOST_DONE:if(w!==Ht)return;R=V.HEADER_FIELD_START;break;case V.HEADERS_ALMOST_DONE:if(w!==Ht)return;P("onHeadersEnd"),R=V.PART_DATA_START;break;case V.PART_DATA_START:R=V.PART_DATA,v("onPartData");case V.PART_DATA:if(s=y,y===0){for(n+=X;n<U&&!(r[n]in p);)n+=I;n-=X,w=r[n]}if(y<h.length)h[y]===w?(y===0&&J("onPartData",!0),y++):y=0;else if(y===h.length)y++,w===Vt?E|=Le.PART_BOUNDARY:w===gt?E|=Le.LAST_BOUNDARY:y=0;else if(y-1===h.length)if(E&Le.PART_BOUNDARY){if(y=0,w===Ht){E&=~Le.PART_BOUNDARY,P("onPartEnd"),P("onPartBegin"),R=V.HEADER_FIELD_START;break}}else E&Le.LAST_BOUNDARY&&w===gt?(P("onPartEnd"),R=V.END,E=0):y=0;if(y>0)c[y-1]=w;else if(s>0){let W=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);P("onPartData",0,s,W),s=0,v("onPartData"),n--}break;case V.END:break;default:throw new Error(`Unexpected state entered: ${R}`)}J("onHeaderField"),J("onHeaderValue"),J("onPartData"),this.index=y,this.state=R,this.flags=E}end(){if(this.state===V.HEADER_FIELD_START&&this.index===0||this.state===V.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==V.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}}});xo(Jo,{AbortError:()=>Xo,Blob:()=>Bn,FetchError:()=>we,File:()=>Jt,FormData:()=>Et,Headers:()=>He,Request:()=>Qt,Response:()=>be,blobFrom:()=>zo,blobFromSync:()=>Uo,default:()=>Zo,fileFrom:()=>jo,fileFromSync:()=>Ko,isRedirect:()=>xn});var sl=ae(require("http")),ll=ae(require("https")),_t=ae(require("zlib")),Ce=ae(require("stream")),Mr=ae(require("buffer"));function ul(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let n=r.indexOf(",");if(n===-1||n<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,n).split(";"),s="",c=!1,h=o[0]||"text/plain",p=h;for(let I=1;I<o.length;I++)o[I]==="base64"?c=!0:(p+=`;${o[I]}`,o[I].indexOf("charset=")===0&&(s=o[I].substring(8)));!o[0]&&!s.length&&(p+=";charset=US-ASCII",s="US-ASCII");let y=c?"base64":"ascii",R=unescape(r.substring(n+1)),E=Buffer.from(R,y);return E.type=h,E.typeFull=p,E.charset=s,E}var cl=ul,Pe=ae(require("stream")),wt=ae(require("util")),ye=ae(require("buffer"));Zt();Vr();var Yr=class extends Error{constructor(r,n){super(r),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},we=class extends Yr{constructor(r,n,o){super(r,n),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}},jr=Symbol.toStringTag,Yo=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[jr]==="URLSearchParams",Kr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[jr]),fl=r=>typeof r=="object"&&(r[jr]==="AbortSignal"||r[jr]==="EventTarget"),dl=(r,n)=>{let o=new URL(n).hostname,s=new URL(r).hostname;return o===s||o.endsWith(`.${s}`)},hl=(r,n)=>{let o=new URL(n).protocol,s=new URL(r).protocol;return o===s},ml=(0,wt.promisify)(Pe.default.pipeline),ce=Symbol("Body internals"),Gt=class{constructor(r,{size:n=0}={}){let o=null;r===null?r=null:Yo(r)?r=ye.Buffer.from(r.toString()):Kr(r)||ye.Buffer.isBuffer(r)||(wt.types.isAnyArrayBuffer(r)?r=ye.Buffer.from(r):ArrayBuffer.isView(r)?r=ye.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof Pe.default||(r instanceof Et?(r=rl(r),o=r.type.split("=")[1]):r=ye.Buffer.from(String(r))));let s=r;ye.Buffer.isBuffer(r)?s=Pe.default.Readable.from(r):Kr(r)&&(s=Pe.default.Readable.from(r.stream())),this[ce]={body:r,stream:s,boundary:o,disturbed:!1,error:null},this.size=n,r instanceof Pe.default&&r.on("error",c=>{let h=c instanceof Yr?c:new we(`Invalid response body while trying to fetch ${this.url}: ${c.message}`,"system",c);this[ce].error=h})}get body(){return this[ce].stream}get bodyUsed(){return this[ce].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:n,byteLength:o}=await Dn(this);return r.slice(n,n+o)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let o=new Et,s=new URLSearchParams(await this.text());for(let[c,h]of s)o.append(c,h);return o}let{toFormData:n}=await Promise.resolve().then(()=>(il(),Ho));return n(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[ce].body&&this[ce].body.type||"",n=await this.arrayBuffer();return new Tt([n],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Dn(this);return new TextDecoder().decode(r)}buffer(){return Dn(this)}};Gt.prototype.buffer=(0,wt.deprecate)(Gt.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Gt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,wt.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Dn(r){if(r[ce].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[ce].disturbed=!0,r[ce].error)throw r[ce].error;let{body:n}=r;if(n===null||!(n instanceof Pe.default))return ye.Buffer.alloc(0);let o=[],s=0;try{for await(let c of n){if(r.size>0&&s+c.length>r.size){let h=new we(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw n.destroy(h),h}s+=c.length,o.push(c)}}catch(c){throw c instanceof Yr?c:new we(`Invalid response body while trying to fetch ${r.url}: ${c.message}`,"system",c)}if(n.readableEnded===!0||n._readableState.ended===!0)try{return o.every(c=>typeof c=="string")?ye.Buffer.from(o.join("")):ye.Buffer.concat(o,s)}catch(c){throw new we(`Could not create Buffer from response body for ${r.url}: ${c.message}`,"system",c)}else throw new we(`Premature close of server response while trying to fetch ${r.url}`)}var Wn=(r,n)=>{let o,s,{body:c}=r[ce];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return c instanceof Pe.default&&typeof c.getBoundary!="function"&&(o=new Pe.PassThrough({highWaterMark:n}),s=new Pe.PassThrough({highWaterMark:n}),c.pipe(o),c.pipe(s),r[ce].stream=o,c=s),c},bl=(0,wt.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Go=(r,n)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Yo(r)?"application/x-www-form-urlencoded;charset=UTF-8":Kr(r)?r.type||null:ye.Buffer.isBuffer(r)||wt.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Et?`multipart/form-data; boundary=${n[ce].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${bl(r)}`:r instanceof Pe.default?null:"text/plain;charset=UTF-8",yl=r=>{let{body:n}=r[ce];return n===null?0:Kr(n)?n.size:ye.Buffer.isBuffer(n)?n.length:n&&typeof n.getLengthSync=="function"&&n.hasKnownLength&&n.hasKnownLength()?n.getLengthSync():null},pl=async(r,{body:n})=>{n===null?r.end():await ml(n,r)},Lo=ae(require("util")),$r=ae(require("http")),zr=typeof $r.default.validateHeaderName=="function"?$r.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let n=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),n}},Ln=typeof $r.default.validateHeaderValue=="function"?$r.default.validateHeaderValue:(r,n)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(n)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},He=class extends URLSearchParams{constructor(r){let n=[];if(r instanceof He){let o=r.raw();for(let[s,c]of Object.entries(o))n.push(...c.map(h=>[s,h]))}else if(r!=null)if(typeof r=="object"&&!Lo.types.isBoxedPrimitive(r)){let o=r[Symbol.iterator];if(o==null)n.push(...Object.entries(r));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...r].map(s=>{if(typeof s!="object"||Lo.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([o,s])=>(zr(o),Ln(o,String(s)),[String(o).toLowerCase(),String(s)])):void 0,super(n),new Proxy(this,{get(o,s,c){switch(s){case"append":case"set":return(h,p)=>(zr(h),Ln(h,String(p)),URLSearchParams.prototype[s].call(o,String(h).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return h=>(zr(h),URLSearchParams.prototype[s].call(o,String(h).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,s,c)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let n=this.getAll(r);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(r)&&(o=o.toLowerCase()),o}forEach(r,n=void 0){for(let o of this.keys())Reflect.apply(r,n,[this.get(o),o,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,n)=>(r[n]=this.getAll(n),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,n)=>{let o=this.getAll(n);return n==="host"?r[n]=o[0]:r[n]=o.length>1?o:o[0],r},{})}};Object.defineProperties(He.prototype,["get","entries","forEach","values"].reduce((r,n)=>(r[n]={enumerable:!0},r),{}));function gl(r=[]){return new He(r.reduce((n,o,s,c)=>(s%2===0&&n.push(c.slice(s,s+2)),n),[]).filter(([n,o])=>{try{return zr(n),Ln(n,String(o)),!0}catch{return!1}}))}var _l=new Set([301,302,303,307,308]),xn=r=>_l.has(r),Ee=Symbol("Response internals"),be=class extends Gt{constructor(r=null,n={}){super(r,n);let o=n.status!=null?n.status:200,s=new He(n.headers);if(r!==null&&!s.has("Content-Type")){let c=Go(r,this);c&&s.append("Content-Type",c)}this[Ee]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:s,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Ee].type}get url(){return this[Ee].url||""}get status(){return this[Ee].status}get ok(){return this[Ee].status>=200&&this[Ee].status<300}get redirected(){return this[Ee].counter>0}get statusText(){return this[Ee].statusText}get headers(){return this[Ee].headers}get highWaterMark(){return this[Ee].highWaterMark}clone(){return new be(Wn(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,n=302){if(!xn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new be(null,{headers:{location:new URL(r).toString()},status:n})}static error(){let r=new be(null,{status:0,statusText:""});return r[Ee].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(be.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Sl=ae(require("url")),Tl=ae(require("util")),El=r=>{if(r.search)return r.search;let n=r.href.length-1,o=r.hash||(r.href[n]==="#"?"#":"");return r.href[n-o.length]==="?"?"?":""},wl=ae(require("net"));function qo(r,n=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",n&&(r.pathname="",r.search=""),r)}var Qo=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),vl="strict-origin-when-cross-origin";function Rl(r){if(!Qo.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Al(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let n=r.host.replace(/(^\[)|(]$)/g,""),o=(0,wl.isIP)(n);return o===4&&/^127\./.test(n)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(n)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function St(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Al(r)}function Cl(r,{referrerURLCallback:n,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let s=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let c=r.referrer,h=qo(c),p=qo(c,!0);h.toString().length>4096&&(h=p),n&&(h=n(h)),o&&(p=o(p));let y=new URL(r.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return p;case"unsafe-url":return h;case"strict-origin":return St(h)&&!St(y)?"no-referrer":p.toString();case"strict-origin-when-cross-origin":return h.origin===y.origin?h:St(h)&&!St(y)?"no-referrer":p;case"same-origin":return h.origin===y.origin?h:"no-referrer";case"origin-when-cross-origin":return h.origin===y.origin?h:p;case"no-referrer-when-downgrade":return St(h)&&!St(y)?"no-referrer":h;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Pl(r){let n=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let s of n)s&&Qo.has(s)&&(o=s);return o}var re=Symbol("Request internals"),Yt=r=>typeof r=="object"&&typeof r[re]=="object",Fl=(0,Tl.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Qt=class extends Gt{constructor(r,n={}){let o;if(Yt(r)?o=new URL(r.url):(o=new URL(r),r={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let s=n.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!Yt(n)&&"data"in n&&Fl(),(n.body!=null||Yt(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let c=n.body?n.body:Yt(r)&&r.body!==null?Wn(r):null;super(c,{size:n.size||r.size||0});let h=new He(n.headers||r.headers||{});if(c!==null&&!h.has("Content-Type")){let R=Go(c,this);R&&h.set("Content-Type",R)}let p=Yt(r)?r.signal:null;if("signal"in n&&(p=n.signal),p!=null&&!fl(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let y=n.referrer==null?r.referrer:n.referrer;if(y==="")y="no-referrer";else if(y){let R=new URL(y);y=/^about:(\/\/)?client$/.test(R)?"client":R}else y=void 0;this[re]={method:s,redirect:n.redirect||r.redirect||"follow",headers:h,parsedURL:o,signal:p,referrer:y},this.follow=n.follow===void 0?r.follow===void 0?20:r.follow:n.follow,this.compress=n.compress===void 0?r.compress===void 0?!0:r.compress:n.compress,this.counter=n.counter||r.counter||0,this.agent=n.agent||r.agent,this.highWaterMark=n.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||r.referrerPolicy||""}get method(){return this[re].method}get url(){return(0,Sl.format)(this[re].parsedURL)}get headers(){return this[re].headers}get redirect(){return this[re].redirect}get signal(){return this[re].signal}get referrer(){if(this[re].referrer==="no-referrer")return"";if(this[re].referrer==="client")return"about:client";if(this[re].referrer)return this[re].referrer.toString()}get referrerPolicy(){return this[re].referrerPolicy}set referrerPolicy(r){this[re].referrerPolicy=Rl(r)}clone(){return new Qt(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Qt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ol=r=>{let{parsedURL:n}=r[re],o=new He(r[re].headers);o.has("Accept")||o.set("Accept","*/*");let s=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(s="0"),r.body!==null){let y=yl(r);typeof y=="number"&&!Number.isNaN(y)&&(s=String(y))}s&&o.set("Content-Length",s),r.referrerPolicy===""&&(r.referrerPolicy=vl),r.referrer&&r.referrer!=="no-referrer"?r[re].referrer=Cl(r):r[re].referrer="no-referrer",r[re].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:c}=r;typeof c=="function"&&(c=c(n)),!o.has("Connection")&&!c&&o.set("Connection","close");let h=El(n),p={path:n.pathname+h,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:c};return{parsedURL:n,options:p}},Xo=class extends Yr{constructor(r,n="aborted"){super(r,n)}};Vr();$o();var Dl=new Set(["data:","http:","https:"]);async function Zo(r,n){return new Promise((o,s)=>{let c=new Qt(r,n),{parsedURL:h,options:p}=Ol(c);if(!Dl.has(h.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${h.protocol.replace(/:$/,"")}" is not supported.`);if(h.protocol==="data:"){let T=cl(c.url),v=new be(T,{headers:{"Content-Type":T.typeFull}});o(v);return}let y=(h.protocol==="https:"?ll.default:sl.default).request,{signal:R}=c,E=null,I=()=>{let T=new Xo("The operation was aborted.");s(T),c.body&&c.body instanceof Ce.default.Readable&&c.body.destroy(T),!(!E||!E.body)&&E.body.emit("error",T)};if(R&&R.aborted){I();return}let X=()=>{I(),w()},U=y(h.toString(),p);R&&R.addEventListener("abort",X);let w=()=>{U.abort(),R&&R.removeEventListener("abort",X)};U.on("error",T=>{s(new we(`request to ${c.url} failed, reason: ${T.message}`,"system",T)),w()}),Nl(U,T=>{E&&E.body&&E.body.destroy(T)}),process.version<"v14"&&U.on("socket",T=>{let v;T.prependListener("end",()=>{v=T._eventsCount}),T.prependListener("close",N=>{if(E&&v<T._eventsCount&&!N){let P=new Error("Premature close");P.code="ERR_STREAM_PREMATURE_CLOSE",E.body.emit("error",P)}})}),U.on("response",T=>{U.setTimeout(0);let v=gl(T.rawHeaders);if(xn(T.statusCode)){let q=v.get("Location"),H=null;try{H=q===null?null:new URL(q,c.url)}catch{if(c.redirect!=="manual"){s(new we(`uri requested responds with an invalid redirect URL: ${q}`,"invalid-redirect")),w();return}}switch(c.redirect){case"error":s(new we(`uri requested responds with a redirect, redirect mode is set to error: ${c.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(H===null)break;if(c.counter>=c.follow){s(new we(`maximum redirect reached at: ${c.url}`,"max-redirect")),w();return}let K={headers:new He(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:Wn(c),signal:c.signal,size:c.size,referrer:c.referrer,referrerPolicy:c.referrerPolicy};if(!dl(c.url,H)||!hl(c.url,H))for(let m of["authorization","www-authenticate","cookie","cookie2"])K.headers.delete(m);if(T.statusCode!==303&&c.body&&n.body instanceof Ce.default.Readable){s(new we("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(T.statusCode===303||(T.statusCode===301||T.statusCode===302)&&c.method==="POST")&&(K.method="GET",K.body=void 0,K.headers.delete("content-length"));let Fe=Pl(v);Fe&&(K.referrerPolicy=Fe),o(Zo(new Qt(H,K))),w();return}default:return s(new TypeError(`Redirect option '${c.redirect}' is not a valid value of RequestRedirect`))}}R&&T.once("end",()=>{R.removeEventListener("abort",X)});let N=(0,Ce.pipeline)(T,new Ce.PassThrough,q=>{q&&s(q)});process.version<"v12.10"&&T.on("aborted",X);let P={url:c.url,status:T.statusCode,statusText:T.statusMessage,headers:v,size:c.size,counter:c.counter,highWaterMark:c.highWaterMark},J=v.get("Content-Encoding");if(!c.compress||c.method==="HEAD"||J===null||T.statusCode===204||T.statusCode===304){E=new be(N,P),o(E);return}let W={flush:_t.default.Z_SYNC_FLUSH,finishFlush:_t.default.Z_SYNC_FLUSH};if(J==="gzip"||J==="x-gzip"){N=(0,Ce.pipeline)(N,_t.default.createGunzip(W),q=>{q&&s(q)}),E=new be(N,P),o(E);return}if(J==="deflate"||J==="x-deflate"){let q=(0,Ce.pipeline)(T,new Ce.PassThrough,H=>{H&&s(H)});q.once("data",H=>{(H[0]&15)===8?N=(0,Ce.pipeline)(N,_t.default.createInflate(),K=>{K&&s(K)}):N=(0,Ce.pipeline)(N,_t.default.createInflateRaw(),K=>{K&&s(K)}),E=new be(N,P),o(E)}),q.once("end",()=>{E||(E=new be(N,P),o(E))});return}if(J==="br"){N=(0,Ce.pipeline)(N,_t.default.createBrotliDecompress(),q=>{q&&s(q)}),E=new be(N,P),o(E);return}E=new be(N,P),o(E)}),pl(U,c).catch(s)})}function Nl(r,n){let o=Mr.Buffer.from(`0\r
\r
`),s=!1,c=!1,h;r.on("response",p=>{let{headers:y}=p;s=y["transfer-encoding"]==="chunked"&&!y["content-length"]}),r.on("socket",p=>{let y=()=>{if(s&&!c){let E=new Error("Premature close");E.code="ERR_STREAM_PREMATURE_CLOSE",n(E)}},R=E=>{c=Mr.Buffer.compare(E.slice(-5),o)===0,!c&&h&&(c=Mr.Buffer.compare(h.slice(-3),o.slice(0,3))===0&&Mr.Buffer.compare(E.slice(-2),o.slice(3))===0),h=E};p.prependListener("close",y),p.on("data",R),r.on("close",()=>{p.removeListener("close",y),p.removeListener("data",R)})})}Zt();Vr();});var Mn=zt(require("fs")),Un=zt(require("path"));var vn=zt(require("fs")),Eo=zt(To());function Kt(r){return(parseInt(r)||0)===0}function wo(r,n){function o(c){let h="";return c.elements.forEach(p=>{h+=" ",h+=p.name}),h}let s="";return r.forEach(c=>{if(console.log("about to parse",c),c.includes("report"))if(vn.default.existsSync(n))try{let h=vn.default.readFileSync(n+"/"+c,"utf8"),y=(0,Eo.xml2js)(h,{ignoreComment:!0,alwaysChildren:!0});console.log("Parsing test results, deciding if only need to show summary results");let R=y.elements[0].elements[0];if(Kt(R.attributes.skipped)&&Kt(R.attributes.skipped)&&Kt(R.attributes.failures)&&Kt(R.attributes.errors)){console.log("building abbreviated string for "+R.attributes.name);let E=""+R.attributes.name+" all passed:";for(let I=0;I<parseInt(R.attributes.tests);I++)E+=" :white_check_mark:";E+=`\r
`,s+=E}else{let E=R.elements[0].attributes.name;console.log("building details for the failed test called: "+E);let I="";I+=`Test named: ${E} has errors: \r
`,R.elements.forEach(U=>{if(U.name==="testcase"){let w=U.attributes.name;if(w+=o(U),w.includes("skipped"))w=":fast_forward: "+w;else if(w.includes("failure")){let v=U.elements[0].elements[0].text.split(/\r?\n/)[0];w=`:x: ~${w}~ _${v}_`}else w=`:white_check_mark: ${w}`;w="    "+w,w+=`\r
`,I+=w}}),s+=I+`\r
`}}catch(h){console.error("Error reading the file:",h)}else console.error("Folder does not exist:",n)}),s}var ti=zt(ei());async function ri(r){let{token:n,channelID:o,message:s,messageBlock:c,thread_ts:h,ts:p}=r;if(c){let y=c.length()||0;console.log(`In the MessageBlock defined, there are ${y} items.`)}try{console.log("Sending message to slack via POST...");let y={channel:o,text:s},R="https://slack.com/api/chat.postMessage";h&&(y.thread_ts=h),p&&(y.ts=p,R="https://slack.com/api/chat.update"),console.log(y);let I=await(await(0,ti.default)(R,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:`Bearer ${n}`},body:JSON.stringify(y)})).json();return console.log(`Message sending results after sending to :${R}`,I),I}catch(y){return console.error("Error sending message:",y),2}}console.log("Hello World! - about to start");async function Bl(){try{let r=process.env.GITHUB_WORKSPACE;console.log(`Our checked out repo location is at: ${r} (normally only visible after actions/checkout) `);let{TEST_RESULTS_FOLDER:n}=process.env,o=typeof n=="string"&&n.trim()!==""?n:"",s=Un.default.join(r,o);try{Mn.default.existsSync(s)?console.log(`${o} exists.`):console.log(`${o} does not exist.`)}catch{throw new Error(`The folder defined as: ${o} does not exist. unset TEST_RESULTS_FOLDER to check in the root folder or check if you need a / at the end`)}console.log(`the result folder is set as: ${s}`);let c=await Mn.default.promises.readdir(s);console.log("- Listing found files: ");let h=c.filter(p=>Un.default.extname(p).toLowerCase()===".xml");if(h.length>0){let p=wo(h,s);console.log("at the end of it all, we have: ",p);let{SLACK_TOKEN:y,SLACK_CHANNEL:R,SLACK_THREAD_TS:E,SLACK_TS:I}=process.env;if(y==null||R==null)throw console.log("\u26A0\uFE0F Error: missing SLACK_TOKEN or SLACK_CHANNEL - please check your workflow file. and add them using with: env: SLACK_CHANNEL: "),new Error("\u26A0\uFE0F Error: missing SLACK_TOKEN or SLACK_CHANNEL - please check your workflow file. and add them using with: env: SLACK_CHANNEL: ");let U=ri({token:y,channelID:R,message:p,thread_ts:E,ts:I});console.log("slackSendResults timestamp: ",U)}else console.log("No XML files found to parse for testing - check your test-results-folder setting.")}catch(r){throw console.log("Had an error while attempting to open the folder: "+r),new Error(`Couldn't open the folder: ${r}`)}console.log("Run() finished.")}Bl();
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

node-fetch-cjs/dist/index.js:
  (*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)
  (*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)
*/
//# sourceMappingURL=index.js.map
